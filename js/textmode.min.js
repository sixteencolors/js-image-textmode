(function(){var k=Object.prototype.hasOwnProperty,l=function(a,c){function b(){this.constructor=a}for(var d in c)k.call(c,d)&&(a[d]=c[d]);b.prototype=c.prototype;a.prototype=new b;a.__super__=c.prototype;return a};this.ImageTextModePalette=function(){function a(c){var b,d;this.colors=[];for(b in c)k.call(c,b)&&(d=c[b],this[b]=d)}a.prototype.toRgbaString=function(c){return"rgba("+c.join(",")+",1)"};return a}();this.ImageTextModePaletteVGA=function(){function a(c){var b,d;a.__super__.constructor.apply(this,
arguments);this.colors=[[0,0,0],[0,0,170],[0,170,0],[0,170,170],[170,0,0],[170,0,170],[170,85,0],[170,170,170],[85,85,85],[85,85,255],[85,255,85],[85,255,255],[255,85,85],[255,85,255],[255,255,85],[255,255,255]];for(b in c)k.call(c,b)&&(d=c[b],this[b]=d)}l(a,this.ImageTextModePalette);return a}.call(this);this.ImageTextModePaletteANSI=function(){function a(c){var b,d;a.__super__.constructor.apply(this,arguments);this.colors=[[0,0,0],[170,0,0],[0,170,0],[170,85,0],[0,0,170],[170,0,170],[0,170,170],
[170,170,170],[85,85,85],[255,85,85],[85,255,85],[255,255,85],[85,85,255],[255,85,255],[85,255,255],[255,255,255]];for(b in c)k.call(c,b)&&(d=c[b],this[b]=d)}l(a,this.ImageTextModePalette);return a}.call(this);this.ImageTextModeFont=function(){return function(a){var c,b;this.chars=[];this.width=8;for(c in a)k.call(a,c)&&(b=a[c],this[c]=b)}}();this.ImageTextModeFont8x16=function(){function a(c){var b,d;a.__super__.constructor.apply(this,arguments);this.chars=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,
126,129,165,129,129,189,153,129,129,126,0,0,0,0],[0,0,126,255,219,255,255,195,231,255,255,126,0,0,0,0],[0,0,0,0,108,254,254,254,254,124,56,16,0,0,0,0],[0,0,0,0,16,56,124,254,124,56,16,0,0,0,0,0],[0,0,0,24,60,60,231,231,231,24,24,60,0,0,0,0],[0,0,0,24,60,126,255,255,126,24,24,60,0,0,0,0],[0,0,0,0,0,0,24,60,60,24,0,0,0,0,0,0],[255,255,255,255,255,255,231,195,195,231,255,255,255,255,255,255],[0,0,0,0,0,60,102,66,66,102,60,0,0,0,0,0],[255,255,255,255,255,195,153,189,189,153,195,255,255,255,255,255],[0,
0,30,14,26,50,120,204,204,204,204,120,0,0,0,0],[0,0,60,102,102,102,102,60,24,126,24,24,0,0,0,0],[0,0,63,51,63,48,48,48,48,112,240,224,0,0,0,0],[0,0,127,99,127,99,99,99,99,103,231,230,192,0,0,0],[0,0,0,24,24,219,60,231,60,219,24,24,0,0,0,0],[0,128,192,224,240,248,254,248,240,224,192,128,0,0,0,0],[0,2,6,14,30,62,254,62,30,14,6,2,0,0,0,0],[0,0,24,60,126,24,24,24,126,60,24,0,0,0,0,0],[0,0,102,102,102,102,102,102,102,0,102,102,0,0,0,0],[0,0,127,219,219,219,123,27,27,27,27,27,0,0,0,0],[0,124,198,96,56,
108,198,198,108,56,12,198,124,0,0,0],[0,0,0,0,0,0,0,0,254,254,254,254,0,0,0,0],[0,0,24,60,126,24,24,24,126,60,24,126,0,0,0,0],[0,0,24,60,126,24,24,24,24,24,24,24,0,0,0,0],[0,0,24,24,24,24,24,24,24,126,60,24,0,0,0,0],[0,0,0,0,0,24,12,254,12,24,0,0,0,0,0,0],[0,0,0,0,0,48,96,254,96,48,0,0,0,0,0,0],[0,0,0,0,0,0,192,192,192,254,0,0,0,0,0,0],[0,0,0,0,0,40,108,254,108,40,0,0,0,0,0,0],[0,0,0,0,16,56,56,124,124,254,254,0,0,0,0,0],[0,0,0,0,254,254,124,124,56,56,16,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0],[0,0,24,60,60,60,24,24,24,0,24,24,0,0,0,0],[0,102,102,102,36,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,108,108,254,108,108,108,254,108,108,0,0,0,0],[24,24,124,198,194,192,124,6,6,134,198,124,24,24,0,0],[0,0,0,0,194,198,12,24,48,96,198,134,0,0,0,0],[0,0,56,108,108,56,118,220,204,204,204,118,0,0,0,0],[0,48,48,48,96,0,0,0,0,0,0,0,0,0,0,0],[0,0,12,24,48,48,48,48,48,48,24,12,0,0,0,0],[0,0,48,24,12,12,12,12,12,12,24,48,0,0,0,0],[0,0,0,0,0,102,60,255,60,102,0,0,0,0,0,0],[0,0,0,0,0,24,24,126,24,24,0,0,0,0,0,0],[0,
0,0,0,0,0,0,0,0,24,24,24,48,0,0,0],[0,0,0,0,0,0,0,254,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,24,24,0,0,0,0],[0,0,0,0,2,6,12,24,48,96,192,128,0,0,0,0],[0,0,56,108,198,198,214,214,198,198,108,56,0,0,0,0],[0,0,24,56,120,24,24,24,24,24,24,126,0,0,0,0],[0,0,124,198,6,12,24,48,96,192,198,254,0,0,0,0],[0,0,124,198,6,6,60,6,6,6,198,124,0,0,0,0],[0,0,12,28,60,108,204,254,12,12,12,30,0,0,0,0],[0,0,254,192,192,192,252,6,6,6,198,124,0,0,0,0],[0,0,56,96,192,192,252,198,198,198,198,124,0,0,0,0],[0,0,254,198,6,6,
12,24,48,48,48,48,0,0,0,0],[0,0,124,198,198,198,124,198,198,198,198,124,0,0,0,0],[0,0,124,198,198,198,126,6,6,6,12,120,0,0,0,0],[0,0,0,0,24,24,0,0,0,24,24,0,0,0,0,0],[0,0,0,0,24,24,0,0,0,24,24,48,0,0,0,0],[0,0,0,6,12,24,48,96,48,24,12,6,0,0,0,0],[0,0,0,0,0,126,0,0,126,0,0,0,0,0,0,0],[0,0,0,96,48,24,12,6,12,24,48,96,0,0,0,0],[0,0,124,198,198,12,24,24,24,0,24,24,0,0,0,0],[0,0,0,124,198,198,222,222,222,220,192,124,0,0,0,0],[0,0,16,56,108,198,198,254,198,198,198,198,0,0,0,0],[0,0,252,102,102,102,124,
102,102,102,102,252,0,0,0,0],[0,0,60,102,194,192,192,192,192,194,102,60,0,0,0,0],[0,0,248,108,102,102,102,102,102,102,108,248,0,0,0,0],[0,0,254,102,98,104,120,104,96,98,102,254,0,0,0,0],[0,0,254,102,98,104,120,104,96,96,96,240,0,0,0,0],[0,0,60,102,194,192,192,222,198,198,102,58,0,0,0,0],[0,0,198,198,198,198,254,198,198,198,198,198,0,0,0,0],[0,0,60,24,24,24,24,24,24,24,24,60,0,0,0,0],[0,0,30,12,12,12,12,12,204,204,204,120,0,0,0,0],[0,0,230,102,102,108,120,120,108,102,102,230,0,0,0,0],[0,0,240,96,96,
96,96,96,96,98,102,254,0,0,0,0],[0,0,198,238,254,254,214,198,198,198,198,198,0,0,0,0],[0,0,198,230,246,254,222,206,198,198,198,198,0,0,0,0],[0,0,124,198,198,198,198,198,198,198,198,124,0,0,0,0],[0,0,252,102,102,102,124,96,96,96,96,240,0,0,0,0],[0,0,124,198,198,198,198,198,198,214,222,124,12,14,0,0],[0,0,252,102,102,102,124,108,102,102,102,230,0,0,0,0],[0,0,124,198,198,96,56,12,6,198,198,124,0,0,0,0],[0,0,126,126,90,24,24,24,24,24,24,60,0,0,0,0],[0,0,198,198,198,198,198,198,198,198,198,124,0,0,0,0],
[0,0,198,198,198,198,198,198,198,108,56,16,0,0,0,0],[0,0,198,198,198,198,214,214,214,254,238,108,0,0,0,0],[0,0,198,198,108,124,56,56,124,108,198,198,0,0,0,0],[0,0,102,102,102,102,60,24,24,24,24,60,0,0,0,0],[0,0,254,198,134,12,24,48,96,194,198,254,0,0,0,0],[0,0,60,48,48,48,48,48,48,48,48,60,0,0,0,0],[0,0,0,128,192,224,112,56,28,14,6,2,0,0,0,0],[0,0,60,12,12,12,12,12,12,12,12,60,0,0,0,0],[16,56,108,198,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,255,0,0],[0,48,24,12,0,0,0,0,0,0,0,0,0,0,0,0],
[0,0,0,0,0,120,12,124,204,204,204,118,0,0,0,0],[0,0,224,96,96,120,108,102,102,102,102,124,0,0,0,0],[0,0,0,0,0,124,198,192,192,192,198,124,0,0,0,0],[0,0,28,12,12,60,108,204,204,204,204,118,0,0,0,0],[0,0,0,0,0,124,198,254,192,192,198,124,0,0,0,0],[0,0,28,54,50,48,120,48,48,48,48,120,0,0,0,0],[0,0,0,0,0,118,204,204,204,204,204,124,12,204,120,0],[0,0,224,96,96,108,118,102,102,102,102,230,0,0,0,0],[0,0,24,24,0,56,24,24,24,24,24,60,0,0,0,0],[0,0,6,6,0,14,6,6,6,6,6,6,102,102,60,0],[0,0,224,96,96,102,108,
120,120,108,102,230,0,0,0,0],[0,0,56,24,24,24,24,24,24,24,24,60,0,0,0,0],[0,0,0,0,0,236,254,214,214,214,214,198,0,0,0,0],[0,0,0,0,0,220,102,102,102,102,102,102,0,0,0,0],[0,0,0,0,0,124,198,198,198,198,198,124,0,0,0,0],[0,0,0,0,0,220,102,102,102,102,102,124,96,96,240,0],[0,0,0,0,0,118,204,204,204,204,204,124,12,12,30,0],[0,0,0,0,0,220,118,102,96,96,96,240,0,0,0,0],[0,0,0,0,0,124,198,96,56,12,198,124,0,0,0,0],[0,0,16,48,48,252,48,48,48,48,54,28,0,0,0,0],[0,0,0,0,0,204,204,204,204,204,204,118,0,0,0,0],
[0,0,0,0,0,198,198,198,198,198,108,56,0,0,0,0],[0,0,0,0,0,198,198,214,214,214,254,108,0,0,0,0],[0,0,0,0,0,198,108,56,56,56,108,198,0,0,0,0],[0,0,0,0,0,198,198,198,198,198,198,126,6,12,248,0],[0,0,0,0,0,254,204,24,48,96,198,254,0,0,0,0],[0,0,14,24,24,24,112,24,24,24,24,14,0,0,0,0],[0,0,24,24,24,24,24,24,24,24,24,24,0,0,0,0],[0,0,112,24,24,24,14,24,24,24,24,112,0,0,0,0],[0,118,220,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,16,56,108,198,198,198,254,0,0,0,0,0],[0,0,60,102,194,192,192,192,192,194,102,60,24,
112,0,0],[0,0,204,0,0,204,204,204,204,204,204,118,0,0,0,0],[0,12,24,48,0,124,198,254,192,192,198,124,0,0,0,0],[0,16,56,108,0,120,12,124,204,204,204,118,0,0,0,0],[0,0,204,0,0,120,12,124,204,204,204,118,0,0,0,0],[0,96,48,24,0,120,12,124,204,204,204,118,0,0,0,0],[0,56,108,56,0,120,12,124,204,204,204,118,0,0,0,0],[0,0,0,0,0,124,198,192,192,192,198,124,24,112,0,0],[0,16,56,108,0,124,198,254,192,192,198,124,0,0,0,0],[0,0,198,0,0,124,198,254,192,192,198,124,0,0,0,0],[0,96,48,24,0,124,198,254,192,192,198,
124,0,0,0,0],[0,0,102,0,0,56,24,24,24,24,24,60,0,0,0,0],[0,24,60,102,0,56,24,24,24,24,24,60,0,0,0,0],[0,96,48,24,0,56,24,24,24,24,24,60,0,0,0,0],[0,198,0,16,56,108,198,198,254,198,198,198,0,0,0,0],[56,108,56,16,56,108,198,254,198,198,198,198,0,0,0,0],[12,24,0,254,102,98,104,120,104,98,102,254,0,0,0,0],[0,0,0,0,0,236,54,54,126,216,216,110,0,0,0,0],[0,0,62,108,204,204,254,204,204,204,204,206,0,0,0,0],[0,16,56,108,0,124,198,198,198,198,198,124,0,0,0,0],[0,0,198,0,0,124,198,198,198,198,198,124,0,0,0,
0],[0,96,48,24,0,124,198,198,198,198,198,124,0,0,0,0],[0,48,120,204,0,204,204,204,204,204,204,118,0,0,0,0],[0,96,48,24,0,204,204,204,204,204,204,118,0,0,0,0],[0,0,198,0,0,198,198,198,198,198,198,126,6,12,120,0],[0,198,0,124,198,198,198,198,198,198,198,124,0,0,0,0],[0,198,0,198,198,198,198,198,198,198,198,124,0,0,0,0],[0,24,24,124,198,192,192,192,198,124,24,24,0,0,0,0],[0,56,108,100,96,240,96,96,96,96,230,252,0,0,0,0],[0,0,102,102,60,24,126,24,126,24,24,24,0,0,0,0],[0,248,204,204,248,196,204,222,204,
204,204,198,0,0,0,0],[0,14,27,24,24,24,126,24,24,24,216,112,0,0,0,0],[0,24,48,96,0,120,12,124,204,204,204,118,0,0,0,0],[0,12,24,48,0,56,24,24,24,24,24,60,0,0,0,0],[0,24,48,96,0,124,198,198,198,198,198,124,0,0,0,0],[0,24,48,96,0,204,204,204,204,204,204,118,0,0,0,0],[0,0,118,220,0,220,102,102,102,102,102,102,0,0,0,0],[118,220,0,198,230,246,254,222,206,198,198,198,0,0,0,0],[0,0,60,108,108,62,0,126,0,0,0,0,0,0,0,0],[0,0,56,108,108,56,0,124,0,0,0,0,0,0,0,0],[0,0,48,48,0,48,48,96,192,198,198,124,0,0,0,
0],[0,0,0,0,0,0,254,192,192,192,192,0,0,0,0,0],[0,0,0,0,0,0,254,6,6,6,6,0,0,0,0,0],[0,96,224,98,102,108,24,48,96,220,134,12,24,62,0,0],[0,96,224,98,102,108,24,48,102,206,154,63,6,6,0,0],[0,0,24,24,0,24,24,24,60,60,60,24,0,0,0,0],[0,0,0,0,0,54,108,216,108,54,0,0,0,0,0,0],[0,0,0,0,0,216,108,54,108,216,0,0,0,0,0,0],[17,68,17,68,17,68,17,68,17,68,17,68,17,68,17,68],[85,170,85,170,85,170,85,170,85,170,85,170,85,170,85,170],[221,119,221,119,221,119,221,119,221,119,221,119,221,119,221,119],[24,24,24,24,
24,24,24,24,24,24,24,24,24,24,24,24],[24,24,24,24,24,24,24,248,24,24,24,24,24,24,24,24],[24,24,24,24,24,248,24,248,24,24,24,24,24,24,24,24],[54,54,54,54,54,54,54,246,54,54,54,54,54,54,54,54],[0,0,0,0,0,0,0,254,54,54,54,54,54,54,54,54],[0,0,0,0,0,248,24,248,24,24,24,24,24,24,24,24],[54,54,54,54,54,246,6,246,54,54,54,54,54,54,54,54],[54,54,54,54,54,54,54,54,54,54,54,54,54,54,54,54],[0,0,0,0,0,254,6,246,54,54,54,54,54,54,54,54],[54,54,54,54,54,246,6,254,0,0,0,0,0,0,0,0],[54,54,54,54,54,54,54,254,0,0,
0,0,0,0,0,0],[24,24,24,24,24,248,24,248,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,248,24,24,24,24,24,24,24,24],[24,24,24,24,24,24,24,31,0,0,0,0,0,0,0,0],[24,24,24,24,24,24,24,255,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,255,24,24,24,24,24,24,24,24],[24,24,24,24,24,24,24,31,24,24,24,24,24,24,24,24],[0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,0],[24,24,24,24,24,24,24,255,24,24,24,24,24,24,24,24],[24,24,24,24,24,31,24,31,24,24,24,24,24,24,24,24],[54,54,54,54,54,54,54,55,54,54,54,54,54,54,54,54],[54,54,54,54,54,55,48,63,0,0,0,0,0,
0,0,0],[0,0,0,0,0,63,48,55,54,54,54,54,54,54,54,54],[54,54,54,54,54,247,0,255,0,0,0,0,0,0,0,0],[0,0,0,0,0,255,0,247,54,54,54,54,54,54,54,54],[54,54,54,54,54,55,48,55,54,54,54,54,54,54,54,54],[0,0,0,0,0,255,0,255,0,0,0,0,0,0,0,0],[54,54,54,54,54,247,0,247,54,54,54,54,54,54,54,54],[24,24,24,24,24,255,0,255,0,0,0,0,0,0,0,0],[54,54,54,54,54,54,54,255,0,0,0,0,0,0,0,0],[0,0,0,0,0,255,0,255,24,24,24,24,24,24,24,24],[0,0,0,0,0,0,0,255,54,54,54,54,54,54,54,54],[54,54,54,54,54,54,54,63,0,0,0,0,0,0,0,0],[24,
24,24,24,24,31,24,31,0,0,0,0,0,0,0,0],[0,0,0,0,0,31,24,31,24,24,24,24,24,24,24,24],[0,0,0,0,0,0,0,63,54,54,54,54,54,54,54,54],[54,54,54,54,54,54,54,255,54,54,54,54,54,54,54,54],[24,24,24,24,24,255,24,255,24,24,24,24,24,24,24,24],[24,24,24,24,24,24,24,248,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,31,24,24,24,24,24,24,24,24],[255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255],[0,0,0,0,0,0,0,255,255,255,255,255,255,255,255,255],[240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,240],[15,
15,15,15,15,15,15,15,15,15,15,15,15,15,15,15],[255,255,255,255,255,255,255,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,118,220,216,216,216,220,118,0,0,0,0],[0,0,120,204,204,204,216,204,198,198,198,204,0,0,0,0],[0,0,254,198,198,192,192,192,192,192,192,192,0,0,0,0],[0,0,0,0,0,254,108,108,108,108,108,108,0,0,0,0],[0,0,254,198,96,48,24,24,48,96,198,254,0,0,0,0],[0,0,0,0,0,126,216,216,216,216,216,112,0,0,0,0],[0,0,0,0,0,102,102,102,102,102,102,124,96,96,192,0],[0,0,0,0,118,220,24,24,24,24,24,24,0,0,0,0],[0,0,126,24,
60,102,102,102,102,60,24,126,0,0,0,0],[0,0,56,108,198,198,254,198,198,198,108,56,0,0,0,0],[0,0,56,108,198,198,198,108,108,108,108,238,0,0,0,0],[0,0,30,48,24,12,62,102,102,102,102,60,0,0,0,0],[0,0,0,0,0,126,219,219,219,126,0,0,0,0,0,0],[0,0,0,3,6,126,219,219,243,126,96,192,0,0,0,0],[0,0,28,48,96,96,124,96,96,96,48,28,0,0,0,0],[0,0,0,124,198,198,198,198,198,198,198,198,0,0,0,0],[0,0,0,0,254,0,0,254,0,0,254,0,0,0,0,0],[0,0,0,0,24,24,126,24,24,0,0,126,0,0,0,0],[0,0,0,48,24,12,6,12,24,48,0,126,0,0,0,0],
[0,0,0,12,24,48,96,48,24,12,0,126,0,0,0,0],[0,0,14,27,27,24,24,24,24,24,24,24,24,24,24,24],[24,24,24,24,24,24,24,24,24,216,216,216,112,0,0,0],[0,0,0,0,0,24,0,126,0,24,0,0,0,0,0,0],[0,0,0,0,0,118,220,0,118,220,0,0,0,0,0,0],[0,56,108,108,56,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,24,24,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,24,0,0,0,0,0,0,0,0],[0,15,12,12,12,12,12,236,108,108,60,28,0,0,0,0],[0,108,54,54,54,54,54,0,0,0,0,0,0,0,0,0],[0,60,102,12,24,50,126,0,0,0,0,0,0,0,0,0],[0,0,0,0,126,126,126,126,126,126,126,
0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]];this.height=16;for(b in c)k.call(c,b)&&(d=c[b],this[b]=d)}l(a,this.ImageTextModeFont);return a}.call(this);this.ImageTextModeFont8x8=function(){function a(c){var b,d;a.__super__.constructor.apply(this,arguments);this.chars=[[0,0,0,0,0,0,0,0],[126,129,165,129,189,153,129,126],[126,255,219,255,195,231,255,126],[108,254,254,254,124,56,16,0],[16,56,124,254,124,56,16,0],[56,124,56,254,254,214,16,56],[16,56,124,254,254,124,16,56],[0,0,24,60,60,24,0,0],[255,
255,231,195,195,231,255,255],[0,60,102,66,66,102,60,0],[255,195,153,189,189,153,195,255],[15,7,15,125,204,204,204,120],[60,102,102,102,60,24,126,24],[63,51,63,48,48,112,240,224],[127,99,127,99,99,103,230,192],[24,219,60,231,231,60,219,24],[128,224,248,254,248,224,128,0],[2,14,62,254,62,14,2,0],[24,60,126,24,24,126,60,24],[102,102,102,102,102,0,102,0],[127,219,219,123,27,27,27,0],[62,97,60,102,102,60,134,124],[0,0,0,0,126,126,126,0],[24,60,126,24,126,60,24,255],[24,60,126,24,24,24,24,0],[24,24,24,
24,126,60,24,0],[0,24,12,254,12,24,0,0],[0,48,96,254,96,48,0,0],[0,0,192,192,192,254,0,0],[0,36,102,255,102,36,0,0],[0,24,60,126,255,255,0,0],[0,255,255,126,60,24,0,0],[0,0,0,0,0,0,0,0],[24,60,60,24,24,0,24,0],[102,102,36,0,0,0,0,0],[108,108,254,108,254,108,108,0],[24,62,96,60,6,124,24,0],[0,198,204,24,48,102,198,0],[56,108,56,118,220,204,118,0],[24,24,48,0,0,0,0,0],[12,24,48,48,48,24,12,0],[48,24,12,12,12,24,48,0],[0,102,60,255,60,102,0,0],[0,24,24,126,24,24,0,0],[0,0,0,0,0,24,24,48],[0,0,0,126,
0,0,0,0],[0,0,0,0,0,24,24,0],[6,12,24,48,96,192,128,0],[56,108,198,214,198,108,56,0],[24,56,24,24,24,24,126,0],[124,198,6,28,48,102,254,0],[124,198,6,60,6,198,124,0],[28,60,108,204,254,12,30,0],[254,192,192,252,6,198,124,0],[56,96,192,252,198,198,124,0],[254,198,12,24,48,48,48,0],[124,198,198,124,198,198,124,0],[124,198,198,126,6,12,120,0],[0,24,24,0,0,24,24,0],[0,24,24,0,0,24,24,48],[6,12,24,48,24,12,6,0],[0,0,126,0,0,126,0,0],[96,48,24,12,24,48,96,0],[124,198,12,24,24,0,24,0],[124,198,222,222,222,
192,120,0],[56,108,198,254,198,198,198,0],[252,102,102,124,102,102,252,0],[60,102,192,192,192,102,60,0],[248,108,102,102,102,108,248,0],[254,98,104,120,104,98,254,0],[254,98,104,120,104,96,240,0],[60,102,192,192,206,102,58,0],[198,198,198,254,198,198,198,0],[60,24,24,24,24,24,60,0],[30,12,12,12,204,204,120,0],[230,102,108,120,108,102,230,0],[240,96,96,96,98,102,254,0],[198,238,254,254,214,198,198,0],[198,230,246,222,206,198,198,0],[124,198,198,198,198,198,124,0],[252,102,102,124,96,96,240,0],[124,
198,198,198,198,206,124,14],[252,102,102,124,108,102,230,0],[60,102,48,24,12,102,60,0],[126,126,90,24,24,24,60,0],[198,198,198,198,198,198,124,0],[198,198,198,198,198,108,56,0],[198,198,198,214,214,254,108,0],[198,198,108,56,108,198,198,0],[102,102,102,60,24,24,60,0],[254,198,140,24,50,102,254,0],[60,48,48,48,48,48,60,0],[192,96,48,24,12,6,2,0],[60,12,12,12,12,12,60,0],[16,56,108,198,0,0,0,0],[0,0,0,0,0,0,0,255],[48,24,12,0,0,0,0,0],[0,0,120,12,124,204,118,0],[224,96,124,102,102,102,220,0],[0,0,124,
198,192,198,124,0],[28,12,124,204,204,204,118,0],[0,0,124,198,254,192,124,0],[60,102,96,248,96,96,240,0],[0,0,118,204,204,124,12,248],[224,96,108,118,102,102,230,0],[24,0,56,24,24,24,60,0],[6,0,6,6,6,102,102,60],[224,96,102,108,120,108,230,0],[56,24,24,24,24,24,60,0],[0,0,236,254,214,214,214,0],[0,0,220,102,102,102,102,0],[0,0,124,198,198,198,124,0],[0,0,220,102,102,124,96,240],[0,0,118,204,204,124,12,30],[0,0,220,118,96,96,240,0],[0,0,126,192,124,6,252,0],[48,48,252,48,48,54,28,0],[0,0,204,204,204,
204,118,0],[0,0,198,198,198,108,56,0],[0,0,198,214,214,254,108,0],[0,0,198,108,56,108,198,0],[0,0,198,198,198,126,6,252],[0,0,126,76,24,50,126,0],[14,24,24,112,24,24,14,0],[24,24,24,24,24,24,24,0],[112,24,24,14,24,24,112,0],[118,220,0,0,0,0,0,0],[0,16,56,108,198,198,254,0],[124,198,192,192,198,124,12,120],[204,0,204,204,204,204,118,0],[12,24,124,198,254,192,124,0],[124,130,120,12,124,204,118,0],[198,0,120,12,124,204,118,0],[48,24,120,12,124,204,118,0],[48,48,120,12,124,204,118,0],[0,0,126,192,192,
126,12,56],[124,130,124,198,254,192,124,0],[198,0,124,198,254,192,124,0],[48,24,124,198,254,192,124,0],[102,0,56,24,24,24,60,0],[124,130,56,24,24,24,60,0],[48,24,0,56,24,24,60,0],[198,56,108,198,254,198,198,0],[56,108,124,198,254,198,198,0],[24,48,254,192,248,192,254,0],[0,0,126,24,126,216,126,0],[62,108,204,254,204,204,206,0],[124,130,124,198,198,198,124,0],[198,0,124,198,198,198,124,0],[48,24,124,198,198,198,124,0],[120,132,0,204,204,204,118,0],[96,48,204,204,204,204,118,0],[198,0,198,198,198,126,
6,252],[198,56,108,198,198,108,56,0],[198,0,198,198,198,198,124,0],[24,24,126,192,192,126,24,24],[56,108,100,240,96,102,252,0],[102,102,60,126,24,126,24,24],[248,204,204,250,198,207,198,199],[14,27,24,60,24,216,112,0],[24,48,120,12,124,204,118,0],[12,24,0,56,24,24,60,0],[12,24,124,198,198,198,124,0],[24,48,204,204,204,204,118,0],[118,220,0,220,102,102,102,0],[118,220,0,230,246,222,206,0],[60,108,108,62,0,126,0,0],[56,108,108,56,0,124,0,0],[24,0,24,24,48,99,62,0],[0,0,0,254,192,192,0,0],[0,0,0,254,
6,6,0,0],[99,230,108,126,51,102,204,15],[99,230,108,122,54,106,223,6],[24,0,24,24,60,60,24,0],[0,51,102,204,102,51,0,0],[0,204,102,51,102,204,0,0],[34,136,34,136,34,136,34,136],[85,170,85,170,85,170,85,170],[119,221,119,221,119,221,119,221],[24,24,24,24,24,24,24,24],[24,24,24,24,248,24,24,24],[24,24,248,24,248,24,24,24],[54,54,54,54,246,54,54,54],[0,0,0,0,254,54,54,54],[0,0,248,24,248,24,24,24],[54,54,246,6,246,54,54,54],[54,54,54,54,54,54,54,54],[0,0,254,6,246,54,54,54],[54,54,246,6,254,0,0,0],[54,
54,54,54,254,0,0,0],[24,24,248,24,248,0,0,0],[0,0,0,0,248,24,24,24],[24,24,24,24,31,0,0,0],[24,24,24,24,255,0,0,0],[0,0,0,0,255,24,24,24],[24,24,24,24,31,24,24,24],[0,0,0,0,255,0,0,0],[24,24,24,24,255,24,24,24],[24,24,31,24,31,24,24,24],[54,54,54,54,55,54,54,54],[54,54,55,48,63,0,0,0],[0,0,63,48,55,54,54,54],[54,54,247,0,255,0,0,0],[0,0,255,0,247,54,54,54],[54,54,55,48,55,54,54,54],[0,0,255,0,255,0,0,0],[54,54,247,0,247,54,54,54],[24,24,255,0,255,0,0,0],[54,54,54,54,255,0,0,0],[0,0,255,0,255,24,24,
24],[0,0,0,0,255,54,54,54],[54,54,54,54,63,0,0,0],[24,24,31,24,31,0,0,0],[0,0,31,24,31,24,24,24],[0,0,0,0,63,54,54,54],[54,54,54,54,255,54,54,54],[24,24,255,24,255,24,24,24],[24,24,24,24,248,0,0,0],[0,0,0,0,31,24,24,24],[255,255,255,255,255,255,255,255],[0,0,0,0,255,255,255,255],[240,240,240,240,240,240,240,240],[15,15,15,15,15,15,15,15],[255,255,255,255,0,0,0,0],[0,0,118,220,200,220,118,0],[120,204,204,216,204,198,204,0],[254,198,192,192,192,192,192,0],[0,0,254,108,108,108,108,0],[254,198,96,48,
96,198,254,0],[0,0,126,216,216,216,112,0],[0,0,102,102,102,102,124,192],[0,118,220,24,24,24,24,0],[126,24,60,102,102,60,24,126],[56,108,198,254,198,108,56,0],[56,108,198,198,108,108,238,0],[14,24,12,62,102,102,60,0],[0,0,126,219,219,126,0,0],[6,12,126,219,219,126,96,192],[30,48,96,126,96,48,30,0],[0,124,198,198,198,198,198,0],[0,254,0,254,0,254,0,0],[24,24,126,24,24,0,126,0],[48,24,12,24,48,0,126,0],[12,24,48,24,12,0,126,0],[14,27,27,24,24,24,24,24],[24,24,24,24,24,216,216,112],[0,24,0,126,0,24,0,
0],[0,118,220,0,118,220,0,0],[56,108,108,56,0,0,0,0],[0,0,0,24,24,0,0,0],[0,0,0,24,0,0,0,0],[15,12,12,12,236,108,60,28],[108,54,54,54,54,0,0,0],[120,12,24,48,124,0,0,0],[0,0,60,60,60,60,0,0],[0,0,0,0,0,0,0,0]];this.height=8;for(b in c)k.call(c,b)&&(d=c[b],this[b]=d)}l(a,this.ImageTextModeFont);return a}.call(this);this.ImageTextModeFontAmiga=function(){function a(c){var b,d;a.__super__.constructor.apply(this,arguments);this.chars=[[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,
0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,
0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[24,60,60,60,24,24,24,0,24,0,0],[102,102,102,102,0,0,0,0,0,0,0],[108,108,254,108,108,108,254,108,108,0,0],[24,62,96,96,60,6,6,124,24,0,0],[0,192,198,204,24,48,102,198,6,0,0],[56,108,108,104,118,220,204,204,118,0,0],[24,24,24,48,0,0,0,0,0,0,0],[12,24,48,48,48,48,48,24,12,0,0],[48,
24,12,12,12,12,12,24,48,0,0],[0,102,102,60,255,60,102,102,0,0,0],[0,24,24,24,126,24,24,24,0,0,0],[0,0,0,0,0,0,24,24,24,48,0],[0,0,0,0,126,0,0,0,0,0,0],[0,0,0,0,0,0,0,24,24,0,0],[0,3,6,4,12,24,48,32,96,192,0],[60,102,102,118,126,110,102,102,60,0,0],[24,56,56,24,24,24,24,24,126,0,0],[60,102,102,6,12,24,48,102,126,0,0],[60,102,6,6,28,6,6,102,60,0,0],[12,28,60,108,204,254,12,12,30,0,0],[126,96,96,124,6,6,6,102,60,0,0],[28,48,96,96,124,102,102,102,60,0,0],[126,102,6,6,12,24,24,24,24,0,0],[60,102,102,102,
60,102,102,102,60,0,0],[60,102,102,102,62,6,6,12,56,0,0],[0,0,24,24,0,0,0,24,24,0,0],[0,0,24,24,0,0,24,24,24,48,0],[0,12,24,48,96,48,24,12,0,0,0],[0,0,0,126,0,0,126,0,0,0,0],[0,48,24,12,6,12,24,48,0,0,0],[60,102,6,6,12,24,0,24,24,0,0],[124,198,198,222,222,222,192,192,120,0,0],[24,60,60,102,102,126,195,195,195,0,0],[252,102,102,102,124,102,102,102,252,0,0],[60,102,192,192,192,192,192,102,60,0,0],[248,108,102,102,102,102,102,108,248,0,0],[254,102,96,96,120,96,96,102,254,0,0],[254,102,96,96,120,96,96,
96,240,0,0],[60,102,192,192,206,198,198,102,62,0,0],[102,102,102,102,126,102,102,102,102,0,0],[126,24,24,24,24,24,24,24,126,0,0],[14,6,6,6,6,102,102,102,60,0,0],[230,102,102,108,120,108,102,102,230,0,0],[240,96,96,96,96,96,98,102,254,0,0],[130,130,198,198,238,254,214,214,198,0,0],[134,198,230,246,254,222,206,198,194,0,0],[56,108,198,198,198,198,198,108,56,0,0],[252,102,102,102,124,96,96,96,240,0,0],[56,108,198,198,198,198,198,108,60,6,3],[252,102,102,102,124,120,108,102,243,0,0],[60,102,102,48,24,
12,6,102,60,0,0],[126,90,24,24,24,24,24,24,60,0,0],[102,102,102,102,102,102,102,102,62,0,0],[195,195,195,102,102,60,60,24,24,0,0],[198,198,214,214,254,238,238,198,198,0,0],[195,195,102,60,24,60,102,195,195,0,0],[195,195,195,102,60,24,24,24,60,0,0],[254,198,134,12,24,48,98,198,254,0,0],[60,48,48,48,48,48,48,48,60,0,0],[0,192,96,32,48,24,12,4,6,3,0],[60,12,12,12,12,12,12,12,60,0,0],[16,56,108,198,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,254],[24,24,24,12,0,0,0,0,0,0,0],[0,0,0,60,6,30,102,102,59,0,0],[224,
96,96,108,118,102,102,102,124,0,0],[0,0,0,60,102,96,96,102,60,0,0],[14,6,6,54,110,102,102,102,59,0,0],[0,0,0,60,102,102,126,96,60,0,0],[28,54,48,48,120,48,48,48,120,0,0],[0,0,0,59,102,102,102,60,198,198,124],[224,96,96,108,118,102,102,102,230,0,0],[24,24,0,56,24,24,24,24,60,0,0],[6,6,0,6,6,6,6,6,6,102,60],[224,96,102,102,108,120,108,102,230,0,0],[56,24,24,24,24,24,24,24,60,0,0],[0,0,0,204,238,254,214,214,198,0,0],[0,0,0,124,102,102,102,102,102,0,0],[0,0,0,60,102,102,102,102,60,0,0],[0,0,0,220,102,
102,102,124,96,96,240],[0,0,0,61,102,102,102,62,6,6,7],[0,0,0,236,118,102,96,96,240,0,0],[0,0,0,62,112,56,28,14,124,0,0],[8,24,24,62,24,24,24,26,12,0,0],[0,0,0,102,102,102,102,102,59,0,0],[0,0,0,102,102,102,60,60,24,0,0],[0,0,0,198,214,214,214,108,108,0,0],[0,0,0,198,108,56,56,108,198,0,0],[0,0,0,102,102,102,102,60,24,48,224],[0,0,0,126,76,24,48,98,126,0,0],[14,24,24,24,112,24,24,24,14,0,0],[24,24,24,24,24,24,24,24,24,24,0],[112,24,24,24,14,24,24,24,112,0,0],[98,186,140,0,0,0,0,0,0,0,0],[204,51,204,
51,204,51,204,51,204,51,204],[126,102,102,102,102,102,126,0,0,0,0],[126,102,102,102,102,102,126,0,0,0,0],[126,102,102,102,102,102,126,0,0,0,0],[126,102,102,102,102,102,126,0,0,0,0],[126,102,102,102,102,102,126,0,0,0,0],[0,126,102,102,102,102,102,126,0,0,0],[126,102,102,102,102,102,126,0,0,0,0],[126,102,102,102,102,102,126,0,0,0,0],[126,102,102,102,102,102,126,0,0,0,0],[126,102,102,102,102,102,126,0,0,0,0],[126,102,102,102,102,102,126,0,0,0,0],[126,102,102,102,102,102,126,0,0,0,0],[126,102,102,102,
102,102,126,0,0,0,0],[126,102,102,102,102,102,126,0,0,0,0],[126,102,102,102,102,102,126,0,0,0,0],[126,102,102,102,102,102,126,0,0,0,0],[126,102,102,102,102,102,126,0,0,0,0],[126,102,102,102,102,102,126,0,0,0,0],[126,102,102,102,102,102,126,0,0,0,0],[126,102,102,102,102,102,126,0,0,0,0],[126,102,102,102,102,102,126,0,0,0,0],[126,102,102,102,102,102,126,0,0,0,0],[126,102,102,102,102,102,126,0,0,0,0],[126,102,102,102,102,102,126,0,0,0,0],[126,102,102,102,102,102,126,0,0,0,0],[126,102,102,102,102,102,
126,0,0,0,0],[126,102,102,102,102,102,126,0,0,0,0],[126,102,102,102,102,102,126,0,0,0,0],[126,102,102,102,102,102,126,0,0,0,0],[126,102,102,102,102,102,126,0,0,0,0],[126,102,102,102,102,102,126,0,0,0,0],[126,102,102,102,102,102,126,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[24,0,24,24,24,60,60,60,24,0,0],[12,12,62,108,108,108,62,12,12,0,0],[28,54,48,48,120,48,48,48,126,0,0],[102,102,60,102,102,102,60,102,102,0,0],[102,102,102,60,24,126,24,24,60,0,0],[24,24,24,24,0,24,24,24,24,0,0],[60,96,96,60,102,102,102,
60,6,6,60],[102,102,0,0,0,0,0,0,0,0,0],[126,129,129,157,177,177,177,157,129,126,0],[60,204,204,118,0,254,0,0,0,0,0],[0,0,51,102,204,102,51,0,0,0,0],[126,6,6,6,0,0,0,0,0,0,0],[0,0,0,0,126,0,0,0,0,0,0],[126,129,177,185,185,177,169,165,129,126,0],[126,0,0,0,0,0,0,0,0,0,0],[60,102,102,60,0,0,0,0,0,0,0],[24,24,24,126,24,24,24,0,126,0,0],[120,12,12,24,48,96,124,0,0,0,0],[120,12,12,56,12,12,120,0,0,0,0],[12,24,48,96,0,0,0,0,0,0,0],[0,0,102,102,102,102,110,122,96,96,0],[126,244,244,244,116,20,20,20,20,20,
0],[0,0,24,24,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,12,24],[24,56,56,24,24,24,24,0,0,0,0],[60,102,102,102,60,0,126,0,0,0,0],[0,0,204,102,51,102,204,0,0,0,0],[64,198,76,88,114,102,206,2,2,0,0],[32,99,38,44,59,49,98,196,15,0,0],[192,99,198,108,217,51,103,193,1,0,0],[24,24,0,24,48,96,96,102,60,0,0],[96,48,8,56,108,198,254,198,198,0,0],[12,24,32,56,108,198,254,198,198,0,0],[48,72,132,56,108,198,254,198,198,0,0],[114,156,0,56,108,198,254,198,198,0,0],[198,198,16,56,108,198,254,198,198,0,0],[56,108,56,108,
108,254,198,198,198,0,0],[31,60,60,108,111,252,204,204,207,0,0],[60,102,192,192,192,192,192,102,60,24,48],[96,24,254,96,96,124,96,96,254,0,0],[24,96,254,96,96,124,96,96,254,0,0],[24,36,254,96,96,124,96,96,254,0,0],[102,0,254,96,96,124,96,96,254,0,0],[48,12,126,24,24,24,24,24,126,0,0],[12,48,126,24,24,24,24,24,126,0,0],[24,36,126,24,24,24,24,24,126,0,0],[102,0,126,24,24,24,24,24,126,0,0],[248,108,102,102,246,102,102,108,248,0,0],[113,142,198,230,246,222,206,198,194,0,0],[48,12,60,102,195,195,195,102,
60,0,0],[12,48,60,102,195,195,195,102,60,0,0],[24,36,60,102,195,195,195,102,60,0,0],[113,142,60,102,195,195,195,102,60,0,0],[102,0,60,102,195,195,195,102,60,0,0],[0,0,99,54,28,28,54,99,0,0,0],[60,102,199,207,219,243,227,102,60,0,0],[96,48,8,102,102,102,102,102,62,0,0],[6,12,16,102,102,102,102,102,62,0,0],[24,36,0,102,102,102,102,102,62,0,0],[102,102,0,102,102,102,102,102,62,0,0],[6,24,195,102,60,24,24,24,60,0,0],[240,96,126,99,99,99,126,96,96,96,240],[124,102,102,102,108,102,102,102,108,96,96],[96,
48,8,60,6,30,102,102,59,0,0],[6,12,16,60,6,30,102,102,59,0,0],[24,36,66,60,6,30,102,102,59,0,0],[113,142,0,60,6,30,102,102,59,0,0],[102,102,0,60,6,30,102,102,59,0,0],[60,102,102,60,6,30,102,102,59,0,0],[0,0,0,126,27,127,216,216,119,0,0],[0,0,0,60,102,96,96,102,60,8,48],[96,48,8,60,102,102,126,96,60,0,0],[6,12,16,60,102,102,126,96,60,0,0],[24,36,66,60,102,102,126,96,60,0,0],[102,102,0,60,102,102,126,96,60,0,0],[96,48,8,56,24,24,24,24,60,0,0],[12,24,32,112,48,48,48,48,120,0,0],[24,36,66,28,12,12,12,
12,30,0,0],[102,102,0,56,24,24,24,24,60,0,0],[108,48,216,12,126,198,198,198,124,0,0],[113,142,0,124,102,102,102,102,102,0,0],[96,48,8,60,102,102,102,102,60,0,0],[6,12,16,60,102,102,102,102,60,0,0],[24,36,66,60,102,102,102,102,60,0,0],[113,142,0,60,102,102,102,102,60,0,0],[102,102,0,60,102,102,102,102,60,0,0],[0,24,24,0,126,0,24,24,0,0,0],[0,0,0,124,206,222,246,230,124,0,0],[96,48,8,204,204,204,204,204,118,0,0],[12,24,32,204,204,204,204,204,118,0,0],[48,72,0,204,204,204,204,204,118,0,0],[204,204,0,
204,204,204,204,204,118,0,0],[6,12,16,102,102,102,102,60,24,24,112],[240,96,96,124,102,102,102,124,96,96,240],[102,102,0,102,102,102,102,60,24,24,112]];this.height=11;for(b in c)k.call(c,b)&&(d=c[b],this[b]=d)}l(a,this.ImageTextModeFont);return a}.call(this);this.ImageTextMode=function(){function a(c){var b,d;this.screen=[];this.palette=new ImageTextModePaletteVGA;this.font=new ImageTextModeFont8x16;for(b in c)k.call(c,b)&&(d=c[b],this[b]=d)}a.VERSION="0.01";a.prototype.parseUrl=function(c){var b;
b=new XMLHttpRequest;b.open("GET",c,!1);b.overrideMimeType("text/plain; charset=x-user-defined");b.send(null);return this.parse(b.status===200||b.status===0?b.responseText:"")};a.prototype.unpackShort=function(c){c=(this.getByteAt(c,1)<<8)+this.getByteAt(c,0);c<0&&(c+=65536);return c};a.prototype.unpackLong=function(c){c=(((this.getByteAt(c,0)<<8)+this.getByteAt(c,1)<<8)+this.getByteAt(c,2)<<8)+this.getByteAt(c,3);c<0&&(c+=4294967296);return c};a.prototype.getByteAt=function(c,b){return c.charCodeAt(b)&
255};a.prototype.getWidth=function(){var c,b,d;b=c=0;for(d=this.screen.length-1;0<=d?b<=d:b>=d;0<=d?b+=1:b-=1)if(this.screen[b]!=null&&this.screen[b].length>c)c=this.screen[b].length;return c};a.prototype.getHeight=function(){return this.screen.length};a.prototype.parsePaletteData=function(c){var b,d,i,a,e;d=[];for(a=0;a<=45;a+=3)e=this.getByteAt(c,a),e=e<<2|e>>4,i=this.getByteAt(c,a+1),i=i<<2|i>>4,b=this.getByteAt(c,a+2),b=b<<2|b>>4,d.push([e,i,b]);return this.palette=new ImageTextModePalette({colors:d})};
a.prototype.parseFontData=function(c,b){var d,i,a,e,f,h;b==null&&(b=16);d=[];a=0;for(f=c.length/b-1;0<=f?a<=f:a>=f;0<=f?a+=1:a-=1){i=[];e=0;for(h=b-1;0<=h?e<=h:e>=h;0<=h?e+=1:e-=1)i.push(this.getByteAt(c,a*b+e));d.push(i)}return this.font=new ImageTextModeFont({chars:d,height:b})};a.prototype.renderCanvas=function(c){var b,d,i,a,e,f,h,j,k,l,q,r,m,n,o,p;r=this.getWidth()*this.font.width;h=this.getHeight()*this.font.height;d=document.createElement("canvas");d.setAttribute("width",r);d.setAttribute("height",
h);i=d.getContext("2d");e=0;for(m=this.screen.length-1;0<=m?e<=m:e>=m;0<=m?e+=1:e-=1)if(this.screen[e]!=null){a=0;for(n=this.screen[e].length-1;0<=n?a<=n:a>=n;0<=n?a+=1:a-=1)if(j=this.screen[e][a],j!=null){j.attr!=null?(f=j.attr&15,b=(j.attr&240)>>4):(f=j.fg,b=j.bg);l=a*8;q=e*16;i.fillStyle=this.palette.toRgbaString(this.palette.colors[b]);i.fillRect(l,q,8,16);i.fillStyle=this.palette.toRgbaString(this.palette.colors[f]);b=this.font.chars[j.ch.charCodeAt(0)&255];f=0;for(o=this.font.height-1;0<=o?
f<=o:f>=o;0<=o?f+=1:f-=1){k=b[f];j=0;for(p=this.font.width-1;0<=p?j<=p:j>=p;0<=p?j+=1:j-=1)k&1<<this.font.width-1-j&&i.fillRect(l+j,q+f,1,1)}}}c.setAttribute("width",r);c.setAttribute("height",h);i=c.getContext("2d");return i.drawImage(d,0,0)};return a}();this.ImageTextModeXBin=function(){function a(c){var b,d;a.__super__.constructor.apply(this,arguments);this.header={width:0,height:0,fontisze:0,flags:0};for(b in c)k.call(c,b)&&(d=c[b],this[b]=d)}l(a,this.ImageTextMode);a.prototype.parse=function(c){var b,
d;this.screen=[];b=c.substr(0,11);if(b.length===!1||!b.match("^XBIN\u001a"))throw Error("File is not an XBin");this.header.width=this.unpackShort(b.substr(5,2));this.header.height=this.unpackShort(b.substr(7,2));this.header.fontsize=this.getByteAt(b.substr(9,1));this.header.flags=this.getByteAt(b.substr(10,1));d=11;this.header.flags&1&&(this.parsePaletteData(c.substr(d,48)),d+=48);if(this.header.flags&2)b=this.header.fontsize,b*=this.header.flags&16?512:256,this.parseFontData(c.substr(d,b),this.header.fontsize),
d+=b;return this.header.flags&4?this._parse_compressed(c.substr(d)):this._parse_uncompressed(c.substr(d))};a.prototype._parse_compressed=function(c){var b,d,a,g,e,f,h,j;h=f=0;this.screen[h]=[];c=c.split("");for(j=[];g=c.shift();){g=this.getByteAt(g,0);if(g===26)break;e=g&192;a=(g&63)+1;b=d=null;j.push(function(){for(;a-- >0;){switch(e){case 0:d=c.shift();b=c.shift();break;case 64:d==null&&(d=c.shift());b=c.shift();break;case 128:b==null&&(b=c.shift());d=c.shift();break;default:d==null&&(d=c.shift()),
b==null&&(b=c.shift())}this.screen[h][f]={ch:d,attr:this.getByteAt(b,0)};f++;if(f===this.header.width){f=0;h++;if(h===this.header.height)break;this.screen[h]==null&&(this.screen[h]=[])}}return[]}.call(this))}return j};a.prototype._parse_uncompressed=function(c){var b,d,a,g,e,f;e=g=0;this.screen[e]=[];a=0;for(f=c.length-2;0<=f?a<=f:a>=f;a+=2){d=c.substr(a,1);if(d==="\u001a")break;b=this.getByteAt(c,a+1);this.screen[e][g]={ch:d,attr:b};g++;if(g===this.header.width){g=0;e++;if(e===this.header.height)break;
this.screen[e]==null&&(this.screen[e]=[])}}return[]};a.prototype.getWidth=function(){return this.header.width};a.prototype.getHeight=function(){return this.header.height};return a}.call(this);this.ImageTextModeANSI=function(){function a(c){var b,d;a.__super__.constructor.apply(this,arguments);this.palette=new ImageTextModePaletteANSI;this.tabstop=8;this.linewrap=80;for(b in c)k.call(c,b)&&(d=c[b],this[b]=d)}l(a,this.ImageTextMode);a.prototype.parse=function(c){var b,d,a,g,e;this.screen=[];this.save_y=
this.save_x=this.y=this.x=this.state=0;this.attr=7;this.argbuf="";for(c=c.split("");b=c.shift();)if(this.state===0)switch(b){case "\u001a":this.state=3;break;case "\u001b":this.state=1;break;case "\n":this.x=0;this.y++;break;case "\r":break;case "\t":for(a=(this.x+1)%this.tabstop;a-- >0;)this.putpixel(" ");break;default:this.putpixel(b)}else if(this.state===1)b!=="["?(this.putpixel("\u001b"),this.putpixel("["),this.state=0):this.state=2;else if(this.state===2)if(b.match("[A-Za-z]")){d=function(){var b,
c,d,e;d=this.argbuf.split(";");e=[];b=0;for(c=d.length;b<c;b++)a=d[b],e.push(parseInt(a));return e}.call(this);switch(b){case "m":g=0;for(e=d.length;g<e;g++)b=d[g],b===0?this.attr=7:b===1?this.attr|=8:b===5?this.attr|=128:30<=b&&b<=37?(this.attr&=248,this.attr|=b-30):40<=b&&b<=47&&(this.attr&=143,this.attr|=b-40<<4);break;case "H":case "f":this.y=(d[0]||1)-1;this.x=(d[1]||1)-1;if(this.y<0)this.y=0;if(this.x<0)this.x=0;break;case "A":this.y-=d[0]||1;if(this.y<0)this.y=0;break;case "B":this.y+=d[0]||
1;break;case "C":this.x+=d[0]||1;break;case "D":this.x-=d[0]||1;if(this.x<0)this.x=0;break;case "E":this.y+=d[0]||1;this.x=0;break;case "F":this.y-=d[0]||1;if(this.y>0)this.y=0;this.x=0;break;case "G":this.x=(d[0]||1)-1;break;case "s":this.save_x=this.x;this.save_y=this.y;break;case "u":this.x=this.save_x;this.y=this.save_y;break;case "J":if(d.length===0||d[0]===0){a=d=this.y+1;for(b=screen.length-1;d<=b?a<=b:a>=b;d<=b?a+=1:a-=1)this.screen[a]=null;a=d=this.x;for(b=screen[this.y].length-1;d<=b?a<=
b:a>=b;d<=b?a+=1:a-=1)this.screen[this.y][a]=null}else if(d[0]===1){a=0;for(d=this.y-1;0<=d?a<=d:a>=d;0<=d?a+=1:a-=1)this.screen[a]=null;a=0;for(d=this.x;0<=d?a<=d:a>=d;0<=d?a+=1:a-=1)this.screen[this.y][a]=null}else if(d[0]===2)this.y=this.x=0,this.screen=[];break;case "K":if(d.length===0||d[0]===0){a=d=this.x;for(b=this.screen[this.y].length-1;d<=b?a<=b:a>=b;d<=b?a+=1:a-=1)this.screen[this.y][a]=null}else if(d[0]===1){a=0;for(d=this.x;0<=d?a<=d:a>=d;0<=d?a+=1:a-=1)this.screen[this.y][a]=null}else d[0]===
2&&(this.screen[this.y]=null)}this.argbuf="";this.state=0}else this.argbuf+=b;else if(this.state===3)break;else this.state=0;return[]};a.prototype.putpixel=function(c){this.screen[this.y]==null&&(this.screen[this.y]=[]);this.screen[this.y][this.x]={ch:c,attr:this.attr};if(++this.x>=this.linewrap)return this.x=0,this.y++};return a}.call(this);this.ImageTextModeBin=function(){function a(c){var b,d;a.__super__.constructor.apply(this,arguments);this.linewrap=160;for(b in c)k.call(c,b)&&(d=c[b],this[b]=
d)}l(a,this.ImageTextMode);a.prototype.parse=function(c){var b,d,a,g,e,f;e=g=0;this.screen[e]=[];a=0;for(f=c.length-2;0<=f?a<=f:a>=f;a+=2){d=c.substr(a,1);if(d==="\u001a")break;b=this.getByteAt(c,a+1);this.screen[e][g]={ch:d,attr:b};g++;g===this.linewrap&&(g=0,e++,this.screen[e]=[])}if(this.screen[e].length===0)return this.screen.pop()};return a}.call(this);this.ImageTextModeIDF=function(){function a(c){var b,d;a.__super__.constructor.apply(this,arguments);this.header={x0:0,x1:0,y0:0,y1:0};for(b in c)k.call(c,
b)&&(d=c[b],this[b]=d)}l(a,this.ImageTextMode);a.prototype.parse=function(c){var b,d,a,g,e,f,h,j;a=c.substr(0,12);if(a.length===!1||!a.match("^\u00041.4"))throw Error("File is not an IDF");this.header.x0=this.unpackShort(a.substr(4,2));this.header.y0=this.unpackShort(a.substr(6,2));this.header.x1=this.unpackShort(a.substr(8,2));this.header.y1=this.unpackShort(a.substr(10,2));a=c.length-48-4096;c.substr(c.length-128,5)==="SAUCE"&&(a-=128);this.parseFontData(c.substr(a,4096));this.parsePaletteData(c.substr(a+
4096,48));h=j=0;this.screen[j]=[];for(f=12;f<a;){b=c.substr(f,2);d=this.unpackShort(b);f+=2;e=1;d===1&&(e=this.unpackShort(c.substr(f,2))&255,f+=2,b=c.substr(f,2),f+=2);d=b.substr(0,1);b=this.getByteAt(b,1);for(g=1;1<=e?g<=e:g>=e;1<=e?g+=1:g-=1)this.screen[j][h]={ch:d,attr:b},h++,h>this.header.x1&&(h=0,j++,this.screen[j]=[])}if(this.screen[j].length===0)return this.screen.pop()};return a}.call(this);this.ImageTextModeADF=function(){function a(b){var c,i;a.__super__.constructor.apply(this,arguments);
this.header={version:0};for(c in b)k.call(b,c)&&(i=b[c],this[c]=i)}var c;l(a,this.ImageTextMode);c=[0,1,2,3,4,5,20,7,56,57,58,59,60,61,62,63];a.prototype.parse=function(b){var c,a,g,e,f,h;this.header.version=this.getByteAt(b,0);this.parsePaletteData(b.substr(1,192));this.parseFontData(b.substr(193,4096));f=e=0;this.screen[f]=[];g=4289;for(h=b.length-2;4289<=h?g<=h:g>=h;g+=2){a=b.substr(g,1);if(a==="\u001a")break;c=this.getByteAt(b,g+1);this.screen[f][e]={ch:a,attr:c};e++;e===80&&(e=0,f++,this.screen[f]=
[])}if(this.screen[f].length===0)return this.screen.pop()};a.prototype.parsePaletteData=function(b){var a,i,g,e,f,h;i=[];f=0;for(h=c.length;f<h;f++)g=c[f],a=g*3,e=this.getByteAt(b,a),e=e<<2|e>>4,g=this.getByteAt(b,a+1),g=g<<2|g>>4,a=this.getByteAt(b,a+2),a=a<<2|a>>4,i.push([e,g,a]);return this.palette=new ImageTextModePalette({colors:i})};return a}.call(this);this.ImageTextModeTundra=function(){function a(c){var b,d;a.__super__.constructor.apply(this,arguments);for(b in c)k.call(c,b)&&(d=c[b],this[b]=
d)}l(a,this.ImageTextMode);a.prototype.parse=function(a){var b,d,i,g,e,f,h,j,k,l;i=[[0,0,0]];f=1;b=e=k=j=0;this.screen[k]=[];for(a=a.substr(8).split("");g=a.shift();){if(g==="\u001a")break;g=g.charCodeAt(0);if(g===1)k=this.unpackLong(a.splice(0,4).join("")),j=this.unpackLong(a.splice(0,4).join("")),this.screen[k]==null&&(this.screen[k]=[]);else{d=null;if(g===2)d=a.shift(),h=this.unpackLong(a.splice(0,4).join("")),e=f++,i.push([h>>16&255,h>>8&255,h&255]);else if(g===4)d=a.shift(),h=this.unpackLong(a.splice(0,
4).join("")),b=f++,i.push([h>>16&255,h>>8&255,h&255]);else if(g===6){d=a.shift();e=f++;b=f++;for(l=0;l<=1;l++)h=this.unpackLong(a.splice(0,4).join("")),i.push([h>>16&255,h>>8&255,h&255])}d==null&&(d=String.fromCharCode(g));this.screen[k][j]={ch:d,fg:e,bg:b};j++;j===80&&(j=0,k++,this.screen[k]=[])}}this.screen[k].length===0&&this.screen.pop();return this.palette=new ImageTextModePalette({colors:i})};return a}.call(this);this.ImageTextModePCBoard=function(){function a(c){var b,d;a.__super__.constructor.apply(this,
arguments);this.tabstop=8;this.linewrap=80;this.codes={POFF:"",WAIT:""};for(b in c)k.call(c,b)&&(d=c[b],this[b]=d)}l(a,this.ImageTextMode);a.prototype.parse=function(a){var b,d,i,g;this.screen=[];this.y=this.x=this.state=0;this.attr=7;g=this.codes;for(d in g)i=g[d],b=RegExp("@"+d+"@","g"),a.replace(b,i);for(a=a.split("");b=a.shift();)if(this.state===0)switch(b){case "\u001a":this.state=2;break;case "@":this.state=1;break;case "\n":this.x=0;this.y++;break;case "\r":break;case "\t":for(b=(this.x+1)%
this.tabstop;b-- >0;)this.putpixel(" ");break;default:this.putpixel(b)}else if(this.state===1){if(b==="X")this.attr=(parseInt(a.shift(),16)<<4)+parseInt(a.shift(),16);else if(b+a.slice(0,3).join("")==="CLS@"){for(b=1;b<=3;b++)a.shift();this.screen=[]}else if(b+a.slice(0,3).join("")==="POS:"){for(b=1;b<=3;b++)a.shift();this.x=a.shift();a[0]===!1&&(this.x+=a.shift());this.x--;a.shift()}else this.putpixel("@"),this.putpixel(b);this.state=0}else if(this.state===2)break;else this.state=0;return[]};a.prototype.putpixel=
function(a){this.screen[this.y]==null&&(this.screen[this.y]=[]);this.screen[this.y][this.x]={ch:a,attr:this.attr};if(++this.x>=this.linewrap)return this.x=0,this.y++};return a}.call(this)}).call(this);