(function(){var j=Object.prototype.hasOwnProperty,l=function(b,d){function a(){this.constructor=b}for(var c in d)j.call(d,c)&&(b[c]=d[c]);a.prototype=d.prototype;b.prototype=new a;b.__super__=d.prototype;return b};this.ImageTextModePalette=function(){function b(d){var a,c;this.colors=[];for(a in d)j.call(d,a)&&(c=d[a],this[a]=c)}b.prototype.toRgbaString=function(d){return"rgba("+d.join(",")+",1)"};return b}();this.ImageTextModePaletteVGA=function(){function b(d){var a,c;b.__super__.constructor.apply(this,
arguments);this.colors=[[0,0,0],[0,0,170],[0,170,0],[0,170,170],[170,0,0],[170,0,170],[170,85,0],[170,170,170],[85,85,85],[85,85,255],[85,255,85],[85,255,255],[255,85,85],[255,85,255],[255,255,85],[255,255,255]];for(a in d)j.call(d,a)&&(c=d[a],this[a]=c)}l(b,this.ImageTextModePalette);return b}.call(this);this.ImageTextModePaletteANSI=function(){function b(d){var a,c;b.__super__.constructor.apply(this,arguments);this.colors=[[0,0,0],[170,0,0],[0,170,0],[170,85,0],[0,0,170],[170,0,170],[0,170,170],
[170,170,170],[85,85,85],[255,85,85],[85,255,85],[255,255,85],[85,85,255],[255,85,255],[85,255,255],[255,255,255]];for(a in d)j.call(d,a)&&(c=d[a],this[a]=c)}l(b,this.ImageTextModePalette);return b}.call(this);this.ImageTextModeFont=function(){return function(b){var d,a;this.chars=[];this.width=8;for(d in b)j.call(b,d)&&(a=b[d],this[d]=a)}}();this.ImageTextModeFont8x16=function(){function b(d){var a,c;b.__super__.constructor.apply(this,arguments);this.chars=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,
126,129,165,129,129,189,153,129,129,126,0,0,0,0],[0,0,126,255,219,255,255,195,231,255,255,126,0,0,0,0],[0,0,0,0,108,254,254,254,254,124,56,16,0,0,0,0],[0,0,0,0,16,56,124,254,124,56,16,0,0,0,0,0],[0,0,0,24,60,60,231,231,231,24,24,60,0,0,0,0],[0,0,0,24,60,126,255,255,126,24,24,60,0,0,0,0],[0,0,0,0,0,0,24,60,60,24,0,0,0,0,0,0],[255,255,255,255,255,255,231,195,195,231,255,255,255,255,255,255],[0,0,0,0,0,60,102,66,66,102,60,0,0,0,0,0],[255,255,255,255,255,195,153,189,189,153,195,255,255,255,255,255],[0,
0,30,14,26,50,120,204,204,204,204,120,0,0,0,0],[0,0,60,102,102,102,102,60,24,126,24,24,0,0,0,0],[0,0,63,51,63,48,48,48,48,112,240,224,0,0,0,0],[0,0,127,99,127,99,99,99,99,103,231,230,192,0,0,0],[0,0,0,24,24,219,60,231,60,219,24,24,0,0,0,0],[0,128,192,224,240,248,254,248,240,224,192,128,0,0,0,0],[0,2,6,14,30,62,254,62,30,14,6,2,0,0,0,0],[0,0,24,60,126,24,24,24,126,60,24,0,0,0,0,0],[0,0,102,102,102,102,102,102,102,0,102,102,0,0,0,0],[0,0,127,219,219,219,123,27,27,27,27,27,0,0,0,0],[0,124,198,96,56,
108,198,198,108,56,12,198,124,0,0,0],[0,0,0,0,0,0,0,0,254,254,254,254,0,0,0,0],[0,0,24,60,126,24,24,24,126,60,24,126,0,0,0,0],[0,0,24,60,126,24,24,24,24,24,24,24,0,0,0,0],[0,0,24,24,24,24,24,24,24,126,60,24,0,0,0,0],[0,0,0,0,0,24,12,254,12,24,0,0,0,0,0,0],[0,0,0,0,0,48,96,254,96,48,0,0,0,0,0,0],[0,0,0,0,0,0,192,192,192,254,0,0,0,0,0,0],[0,0,0,0,0,40,108,254,108,40,0,0,0,0,0,0],[0,0,0,0,16,56,56,124,124,254,254,0,0,0,0,0],[0,0,0,0,254,254,124,124,56,56,16,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0],[0,0,24,60,60,60,24,24,24,0,24,24,0,0,0,0],[0,102,102,102,36,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,108,108,254,108,108,108,254,108,108,0,0,0,0],[24,24,124,198,194,192,124,6,6,134,198,124,24,24,0,0],[0,0,0,0,194,198,12,24,48,96,198,134,0,0,0,0],[0,0,56,108,108,56,118,220,204,204,204,118,0,0,0,0],[0,48,48,48,96,0,0,0,0,0,0,0,0,0,0,0],[0,0,12,24,48,48,48,48,48,48,24,12,0,0,0,0],[0,0,48,24,12,12,12,12,12,12,24,48,0,0,0,0],[0,0,0,0,0,102,60,255,60,102,0,0,0,0,0,0],[0,0,0,0,0,24,24,126,24,24,0,0,0,0,0,0],[0,
0,0,0,0,0,0,0,0,24,24,24,48,0,0,0],[0,0,0,0,0,0,0,254,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,24,24,0,0,0,0],[0,0,0,0,2,6,12,24,48,96,192,128,0,0,0,0],[0,0,56,108,198,198,214,214,198,198,108,56,0,0,0,0],[0,0,24,56,120,24,24,24,24,24,24,126,0,0,0,0],[0,0,124,198,6,12,24,48,96,192,198,254,0,0,0,0],[0,0,124,198,6,6,60,6,6,6,198,124,0,0,0,0],[0,0,12,28,60,108,204,254,12,12,12,30,0,0,0,0],[0,0,254,192,192,192,252,6,6,6,198,124,0,0,0,0],[0,0,56,96,192,192,252,198,198,198,198,124,0,0,0,0],[0,0,254,198,6,6,
12,24,48,48,48,48,0,0,0,0],[0,0,124,198,198,198,124,198,198,198,198,124,0,0,0,0],[0,0,124,198,198,198,126,6,6,6,12,120,0,0,0,0],[0,0,0,0,24,24,0,0,0,24,24,0,0,0,0,0],[0,0,0,0,24,24,0,0,0,24,24,48,0,0,0,0],[0,0,0,6,12,24,48,96,48,24,12,6,0,0,0,0],[0,0,0,0,0,126,0,0,126,0,0,0,0,0,0,0],[0,0,0,96,48,24,12,6,12,24,48,96,0,0,0,0],[0,0,124,198,198,12,24,24,24,0,24,24,0,0,0,0],[0,0,0,124,198,198,222,222,222,220,192,124,0,0,0,0],[0,0,16,56,108,198,198,254,198,198,198,198,0,0,0,0],[0,0,252,102,102,102,124,
102,102,102,102,252,0,0,0,0],[0,0,60,102,194,192,192,192,192,194,102,60,0,0,0,0],[0,0,248,108,102,102,102,102,102,102,108,248,0,0,0,0],[0,0,254,102,98,104,120,104,96,98,102,254,0,0,0,0],[0,0,254,102,98,104,120,104,96,96,96,240,0,0,0,0],[0,0,60,102,194,192,192,222,198,198,102,58,0,0,0,0],[0,0,198,198,198,198,254,198,198,198,198,198,0,0,0,0],[0,0,60,24,24,24,24,24,24,24,24,60,0,0,0,0],[0,0,30,12,12,12,12,12,204,204,204,120,0,0,0,0],[0,0,230,102,102,108,120,120,108,102,102,230,0,0,0,0],[0,0,240,96,96,
96,96,96,96,98,102,254,0,0,0,0],[0,0,198,238,254,254,214,198,198,198,198,198,0,0,0,0],[0,0,198,230,246,254,222,206,198,198,198,198,0,0,0,0],[0,0,124,198,198,198,198,198,198,198,198,124,0,0,0,0],[0,0,252,102,102,102,124,96,96,96,96,240,0,0,0,0],[0,0,124,198,198,198,198,198,198,214,222,124,12,14,0,0],[0,0,252,102,102,102,124,108,102,102,102,230,0,0,0,0],[0,0,124,198,198,96,56,12,6,198,198,124,0,0,0,0],[0,0,126,126,90,24,24,24,24,24,24,60,0,0,0,0],[0,0,198,198,198,198,198,198,198,198,198,124,0,0,0,0],
[0,0,198,198,198,198,198,198,198,108,56,16,0,0,0,0],[0,0,198,198,198,198,214,214,214,254,238,108,0,0,0,0],[0,0,198,198,108,124,56,56,124,108,198,198,0,0,0,0],[0,0,102,102,102,102,60,24,24,24,24,60,0,0,0,0],[0,0,254,198,134,12,24,48,96,194,198,254,0,0,0,0],[0,0,60,48,48,48,48,48,48,48,48,60,0,0,0,0],[0,0,0,128,192,224,112,56,28,14,6,2,0,0,0,0],[0,0,60,12,12,12,12,12,12,12,12,60,0,0,0,0],[16,56,108,198,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,255,0,0],[0,48,24,12,0,0,0,0,0,0,0,0,0,0,0,0],
[0,0,0,0,0,120,12,124,204,204,204,118,0,0,0,0],[0,0,224,96,96,120,108,102,102,102,102,124,0,0,0,0],[0,0,0,0,0,124,198,192,192,192,198,124,0,0,0,0],[0,0,28,12,12,60,108,204,204,204,204,118,0,0,0,0],[0,0,0,0,0,124,198,254,192,192,198,124,0,0,0,0],[0,0,28,54,50,48,120,48,48,48,48,120,0,0,0,0],[0,0,0,0,0,118,204,204,204,204,204,124,12,204,120,0],[0,0,224,96,96,108,118,102,102,102,102,230,0,0,0,0],[0,0,24,24,0,56,24,24,24,24,24,60,0,0,0,0],[0,0,6,6,0,14,6,6,6,6,6,6,102,102,60,0],[0,0,224,96,96,102,108,
120,120,108,102,230,0,0,0,0],[0,0,56,24,24,24,24,24,24,24,24,60,0,0,0,0],[0,0,0,0,0,236,254,214,214,214,214,198,0,0,0,0],[0,0,0,0,0,220,102,102,102,102,102,102,0,0,0,0],[0,0,0,0,0,124,198,198,198,198,198,124,0,0,0,0],[0,0,0,0,0,220,102,102,102,102,102,124,96,96,240,0],[0,0,0,0,0,118,204,204,204,204,204,124,12,12,30,0],[0,0,0,0,0,220,118,102,96,96,96,240,0,0,0,0],[0,0,0,0,0,124,198,96,56,12,198,124,0,0,0,0],[0,0,16,48,48,252,48,48,48,48,54,28,0,0,0,0],[0,0,0,0,0,204,204,204,204,204,204,118,0,0,0,0],
[0,0,0,0,0,198,198,198,198,198,108,56,0,0,0,0],[0,0,0,0,0,198,198,214,214,214,254,108,0,0,0,0],[0,0,0,0,0,198,108,56,56,56,108,198,0,0,0,0],[0,0,0,0,0,198,198,198,198,198,198,126,6,12,248,0],[0,0,0,0,0,254,204,24,48,96,198,254,0,0,0,0],[0,0,14,24,24,24,112,24,24,24,24,14,0,0,0,0],[0,0,24,24,24,24,24,24,24,24,24,24,0,0,0,0],[0,0,112,24,24,24,14,24,24,24,24,112,0,0,0,0],[0,118,220,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,16,56,108,198,198,198,254,0,0,0,0,0],[0,0,60,102,194,192,192,192,192,194,102,60,24,
112,0,0],[0,0,204,0,0,204,204,204,204,204,204,118,0,0,0,0],[0,12,24,48,0,124,198,254,192,192,198,124,0,0,0,0],[0,16,56,108,0,120,12,124,204,204,204,118,0,0,0,0],[0,0,204,0,0,120,12,124,204,204,204,118,0,0,0,0],[0,96,48,24,0,120,12,124,204,204,204,118,0,0,0,0],[0,56,108,56,0,120,12,124,204,204,204,118,0,0,0,0],[0,0,0,0,0,124,198,192,192,192,198,124,24,112,0,0],[0,16,56,108,0,124,198,254,192,192,198,124,0,0,0,0],[0,0,198,0,0,124,198,254,192,192,198,124,0,0,0,0],[0,96,48,24,0,124,198,254,192,192,198,
124,0,0,0,0],[0,0,102,0,0,56,24,24,24,24,24,60,0,0,0,0],[0,24,60,102,0,56,24,24,24,24,24,60,0,0,0,0],[0,96,48,24,0,56,24,24,24,24,24,60,0,0,0,0],[0,198,0,16,56,108,198,198,254,198,198,198,0,0,0,0],[56,108,56,16,56,108,198,254,198,198,198,198,0,0,0,0],[12,24,0,254,102,98,104,120,104,98,102,254,0,0,0,0],[0,0,0,0,0,236,54,54,126,216,216,110,0,0,0,0],[0,0,62,108,204,204,254,204,204,204,204,206,0,0,0,0],[0,16,56,108,0,124,198,198,198,198,198,124,0,0,0,0],[0,0,198,0,0,124,198,198,198,198,198,124,0,0,0,
0],[0,96,48,24,0,124,198,198,198,198,198,124,0,0,0,0],[0,48,120,204,0,204,204,204,204,204,204,118,0,0,0,0],[0,96,48,24,0,204,204,204,204,204,204,118,0,0,0,0],[0,0,198,0,0,198,198,198,198,198,198,126,6,12,120,0],[0,198,0,124,198,198,198,198,198,198,198,124,0,0,0,0],[0,198,0,198,198,198,198,198,198,198,198,124,0,0,0,0],[0,24,24,124,198,192,192,192,198,124,24,24,0,0,0,0],[0,56,108,100,96,240,96,96,96,96,230,252,0,0,0,0],[0,0,102,102,60,24,126,24,126,24,24,24,0,0,0,0],[0,248,204,204,248,196,204,222,204,
204,204,198,0,0,0,0],[0,14,27,24,24,24,126,24,24,24,216,112,0,0,0,0],[0,24,48,96,0,120,12,124,204,204,204,118,0,0,0,0],[0,12,24,48,0,56,24,24,24,24,24,60,0,0,0,0],[0,24,48,96,0,124,198,198,198,198,198,124,0,0,0,0],[0,24,48,96,0,204,204,204,204,204,204,118,0,0,0,0],[0,0,118,220,0,220,102,102,102,102,102,102,0,0,0,0],[118,220,0,198,230,246,254,222,206,198,198,198,0,0,0,0],[0,0,60,108,108,62,0,126,0,0,0,0,0,0,0,0],[0,0,56,108,108,56,0,124,0,0,0,0,0,0,0,0],[0,0,48,48,0,48,48,96,192,198,198,124,0,0,0,
0],[0,0,0,0,0,0,254,192,192,192,192,0,0,0,0,0],[0,0,0,0,0,0,254,6,6,6,6,0,0,0,0,0],[0,96,224,98,102,108,24,48,96,220,134,12,24,62,0,0],[0,96,224,98,102,108,24,48,102,206,154,63,6,6,0,0],[0,0,24,24,0,24,24,24,60,60,60,24,0,0,0,0],[0,0,0,0,0,54,108,216,108,54,0,0,0,0,0,0],[0,0,0,0,0,216,108,54,108,216,0,0,0,0,0,0],[17,68,17,68,17,68,17,68,17,68,17,68,17,68,17,68],[85,170,85,170,85,170,85,170,85,170,85,170,85,170,85,170],[221,119,221,119,221,119,221,119,221,119,221,119,221,119,221,119],[24,24,24,24,
24,24,24,24,24,24,24,24,24,24,24,24],[24,24,24,24,24,24,24,248,24,24,24,24,24,24,24,24],[24,24,24,24,24,248,24,248,24,24,24,24,24,24,24,24],[54,54,54,54,54,54,54,246,54,54,54,54,54,54,54,54],[0,0,0,0,0,0,0,254,54,54,54,54,54,54,54,54],[0,0,0,0,0,248,24,248,24,24,24,24,24,24,24,24],[54,54,54,54,54,246,6,246,54,54,54,54,54,54,54,54],[54,54,54,54,54,54,54,54,54,54,54,54,54,54,54,54],[0,0,0,0,0,254,6,246,54,54,54,54,54,54,54,54],[54,54,54,54,54,246,6,254,0,0,0,0,0,0,0,0],[54,54,54,54,54,54,54,254,0,0,
0,0,0,0,0,0],[24,24,24,24,24,248,24,248,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,248,24,24,24,24,24,24,24,24],[24,24,24,24,24,24,24,31,0,0,0,0,0,0,0,0],[24,24,24,24,24,24,24,255,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,255,24,24,24,24,24,24,24,24],[24,24,24,24,24,24,24,31,24,24,24,24,24,24,24,24],[0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,0],[24,24,24,24,24,24,24,255,24,24,24,24,24,24,24,24],[24,24,24,24,24,31,24,31,24,24,24,24,24,24,24,24],[54,54,54,54,54,54,54,55,54,54,54,54,54,54,54,54],[54,54,54,54,54,55,48,63,0,0,0,0,0,
0,0,0],[0,0,0,0,0,63,48,55,54,54,54,54,54,54,54,54],[54,54,54,54,54,247,0,255,0,0,0,0,0,0,0,0],[0,0,0,0,0,255,0,247,54,54,54,54,54,54,54,54],[54,54,54,54,54,55,48,55,54,54,54,54,54,54,54,54],[0,0,0,0,0,255,0,255,0,0,0,0,0,0,0,0],[54,54,54,54,54,247,0,247,54,54,54,54,54,54,54,54],[24,24,24,24,24,255,0,255,0,0,0,0,0,0,0,0],[54,54,54,54,54,54,54,255,0,0,0,0,0,0,0,0],[0,0,0,0,0,255,0,255,24,24,24,24,24,24,24,24],[0,0,0,0,0,0,0,255,54,54,54,54,54,54,54,54],[54,54,54,54,54,54,54,63,0,0,0,0,0,0,0,0],[24,
24,24,24,24,31,24,31,0,0,0,0,0,0,0,0],[0,0,0,0,0,31,24,31,24,24,24,24,24,24,24,24],[0,0,0,0,0,0,0,63,54,54,54,54,54,54,54,54],[54,54,54,54,54,54,54,255,54,54,54,54,54,54,54,54],[24,24,24,24,24,255,24,255,24,24,24,24,24,24,24,24],[24,24,24,24,24,24,24,248,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,31,24,24,24,24,24,24,24,24],[255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255],[0,0,0,0,0,0,0,255,255,255,255,255,255,255,255,255],[240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,240],[15,
15,15,15,15,15,15,15,15,15,15,15,15,15,15,15],[255,255,255,255,255,255,255,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,118,220,216,216,216,220,118,0,0,0,0],[0,0,120,204,204,204,216,204,198,198,198,204,0,0,0,0],[0,0,254,198,198,192,192,192,192,192,192,192,0,0,0,0],[0,0,0,0,0,254,108,108,108,108,108,108,0,0,0,0],[0,0,254,198,96,48,24,24,48,96,198,254,0,0,0,0],[0,0,0,0,0,126,216,216,216,216,216,112,0,0,0,0],[0,0,0,0,0,102,102,102,102,102,102,124,96,96,192,0],[0,0,0,0,118,220,24,24,24,24,24,24,0,0,0,0],[0,0,126,24,
60,102,102,102,102,60,24,126,0,0,0,0],[0,0,56,108,198,198,254,198,198,198,108,56,0,0,0,0],[0,0,56,108,198,198,198,108,108,108,108,238,0,0,0,0],[0,0,30,48,24,12,62,102,102,102,102,60,0,0,0,0],[0,0,0,0,0,126,219,219,219,126,0,0,0,0,0,0],[0,0,0,3,6,126,219,219,243,126,96,192,0,0,0,0],[0,0,28,48,96,96,124,96,96,96,48,28,0,0,0,0],[0,0,0,124,198,198,198,198,198,198,198,198,0,0,0,0],[0,0,0,0,254,0,0,254,0,0,254,0,0,0,0,0],[0,0,0,0,24,24,126,24,24,0,0,126,0,0,0,0],[0,0,0,48,24,12,6,12,24,48,0,126,0,0,0,0],
[0,0,0,12,24,48,96,48,24,12,0,126,0,0,0,0],[0,0,14,27,27,24,24,24,24,24,24,24,24,24,24,24],[24,24,24,24,24,24,24,24,24,216,216,216,112,0,0,0],[0,0,0,0,0,24,0,126,0,24,0,0,0,0,0,0],[0,0,0,0,0,118,220,0,118,220,0,0,0,0,0,0],[0,56,108,108,56,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,24,24,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,24,0,0,0,0,0,0,0,0],[0,15,12,12,12,12,12,236,108,108,60,28,0,0,0,0],[0,108,54,54,54,54,54,0,0,0,0,0,0,0,0,0],[0,60,102,12,24,50,126,0,0,0,0,0,0,0,0,0],[0,0,0,0,126,126,126,126,126,126,126,
0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]];this.height=16;for(a in d)j.call(d,a)&&(c=d[a],this[a]=c)}l(b,this.ImageTextModeFont);return b}.call(this);this.ImageTextModeFont8x8=function(){function b(d){var a,c;b.__super__.constructor.apply(this,arguments);this.chars=[[0,0,0,0,0,0,0,0],[126,129,165,129,189,153,129,126],[126,255,219,255,195,231,255,126],[108,254,254,254,124,56,16,0],[16,56,124,254,124,56,16,0],[56,124,56,254,254,214,16,56],[16,56,124,254,254,124,16,56],[0,0,24,60,60,24,0,0],[255,
255,231,195,195,231,255,255],[0,60,102,66,66,102,60,0],[255,195,153,189,189,153,195,255],[15,7,15,125,204,204,204,120],[60,102,102,102,60,24,126,24],[63,51,63,48,48,112,240,224],[127,99,127,99,99,103,230,192],[24,219,60,231,231,60,219,24],[128,224,248,254,248,224,128,0],[2,14,62,254,62,14,2,0],[24,60,126,24,24,126,60,24],[102,102,102,102,102,0,102,0],[127,219,219,123,27,27,27,0],[62,97,60,102,102,60,134,124],[0,0,0,0,126,126,126,0],[24,60,126,24,126,60,24,255],[24,60,126,24,24,24,24,0],[24,24,24,
24,126,60,24,0],[0,24,12,254,12,24,0,0],[0,48,96,254,96,48,0,0],[0,0,192,192,192,254,0,0],[0,36,102,255,102,36,0,0],[0,24,60,126,255,255,0,0],[0,255,255,126,60,24,0,0],[0,0,0,0,0,0,0,0],[24,60,60,24,24,0,24,0],[102,102,36,0,0,0,0,0],[108,108,254,108,254,108,108,0],[24,62,96,60,6,124,24,0],[0,198,204,24,48,102,198,0],[56,108,56,118,220,204,118,0],[24,24,48,0,0,0,0,0],[12,24,48,48,48,24,12,0],[48,24,12,12,12,24,48,0],[0,102,60,255,60,102,0,0],[0,24,24,126,24,24,0,0],[0,0,0,0,0,24,24,48],[0,0,0,126,
0,0,0,0],[0,0,0,0,0,24,24,0],[6,12,24,48,96,192,128,0],[56,108,198,214,198,108,56,0],[24,56,24,24,24,24,126,0],[124,198,6,28,48,102,254,0],[124,198,6,60,6,198,124,0],[28,60,108,204,254,12,30,0],[254,192,192,252,6,198,124,0],[56,96,192,252,198,198,124,0],[254,198,12,24,48,48,48,0],[124,198,198,124,198,198,124,0],[124,198,198,126,6,12,120,0],[0,24,24,0,0,24,24,0],[0,24,24,0,0,24,24,48],[6,12,24,48,24,12,6,0],[0,0,126,0,0,126,0,0],[96,48,24,12,24,48,96,0],[124,198,12,24,24,0,24,0],[124,198,222,222,222,
192,120,0],[56,108,198,254,198,198,198,0],[252,102,102,124,102,102,252,0],[60,102,192,192,192,102,60,0],[248,108,102,102,102,108,248,0],[254,98,104,120,104,98,254,0],[254,98,104,120,104,96,240,0],[60,102,192,192,206,102,58,0],[198,198,198,254,198,198,198,0],[60,24,24,24,24,24,60,0],[30,12,12,12,204,204,120,0],[230,102,108,120,108,102,230,0],[240,96,96,96,98,102,254,0],[198,238,254,254,214,198,198,0],[198,230,246,222,206,198,198,0],[124,198,198,198,198,198,124,0],[252,102,102,124,96,96,240,0],[124,
198,198,198,198,206,124,14],[252,102,102,124,108,102,230,0],[60,102,48,24,12,102,60,0],[126,126,90,24,24,24,60,0],[198,198,198,198,198,198,124,0],[198,198,198,198,198,108,56,0],[198,198,198,214,214,254,108,0],[198,198,108,56,108,198,198,0],[102,102,102,60,24,24,60,0],[254,198,140,24,50,102,254,0],[60,48,48,48,48,48,60,0],[192,96,48,24,12,6,2,0],[60,12,12,12,12,12,60,0],[16,56,108,198,0,0,0,0],[0,0,0,0,0,0,0,255],[48,24,12,0,0,0,0,0],[0,0,120,12,124,204,118,0],[224,96,124,102,102,102,220,0],[0,0,124,
198,192,198,124,0],[28,12,124,204,204,204,118,0],[0,0,124,198,254,192,124,0],[60,102,96,248,96,96,240,0],[0,0,118,204,204,124,12,248],[224,96,108,118,102,102,230,0],[24,0,56,24,24,24,60,0],[6,0,6,6,6,102,102,60],[224,96,102,108,120,108,230,0],[56,24,24,24,24,24,60,0],[0,0,236,254,214,214,214,0],[0,0,220,102,102,102,102,0],[0,0,124,198,198,198,124,0],[0,0,220,102,102,124,96,240],[0,0,118,204,204,124,12,30],[0,0,220,118,96,96,240,0],[0,0,126,192,124,6,252,0],[48,48,252,48,48,54,28,0],[0,0,204,204,204,
204,118,0],[0,0,198,198,198,108,56,0],[0,0,198,214,214,254,108,0],[0,0,198,108,56,108,198,0],[0,0,198,198,198,126,6,252],[0,0,126,76,24,50,126,0],[14,24,24,112,24,24,14,0],[24,24,24,24,24,24,24,0],[112,24,24,14,24,24,112,0],[118,220,0,0,0,0,0,0],[0,16,56,108,198,198,254,0],[124,198,192,192,198,124,12,120],[204,0,204,204,204,204,118,0],[12,24,124,198,254,192,124,0],[124,130,120,12,124,204,118,0],[198,0,120,12,124,204,118,0],[48,24,120,12,124,204,118,0],[48,48,120,12,124,204,118,0],[0,0,126,192,192,
126,12,56],[124,130,124,198,254,192,124,0],[198,0,124,198,254,192,124,0],[48,24,124,198,254,192,124,0],[102,0,56,24,24,24,60,0],[124,130,56,24,24,24,60,0],[48,24,0,56,24,24,60,0],[198,56,108,198,254,198,198,0],[56,108,124,198,254,198,198,0],[24,48,254,192,248,192,254,0],[0,0,126,24,126,216,126,0],[62,108,204,254,204,204,206,0],[124,130,124,198,198,198,124,0],[198,0,124,198,198,198,124,0],[48,24,124,198,198,198,124,0],[120,132,0,204,204,204,118,0],[96,48,204,204,204,204,118,0],[198,0,198,198,198,126,
6,252],[198,56,108,198,198,108,56,0],[198,0,198,198,198,198,124,0],[24,24,126,192,192,126,24,24],[56,108,100,240,96,102,252,0],[102,102,60,126,24,126,24,24],[248,204,204,250,198,207,198,199],[14,27,24,60,24,216,112,0],[24,48,120,12,124,204,118,0],[12,24,0,56,24,24,60,0],[12,24,124,198,198,198,124,0],[24,48,204,204,204,204,118,0],[118,220,0,220,102,102,102,0],[118,220,0,230,246,222,206,0],[60,108,108,62,0,126,0,0],[56,108,108,56,0,124,0,0],[24,0,24,24,48,99,62,0],[0,0,0,254,192,192,0,0],[0,0,0,254,
6,6,0,0],[99,230,108,126,51,102,204,15],[99,230,108,122,54,106,223,6],[24,0,24,24,60,60,24,0],[0,51,102,204,102,51,0,0],[0,204,102,51,102,204,0,0],[34,136,34,136,34,136,34,136],[85,170,85,170,85,170,85,170],[119,221,119,221,119,221,119,221],[24,24,24,24,24,24,24,24],[24,24,24,24,248,24,24,24],[24,24,248,24,248,24,24,24],[54,54,54,54,246,54,54,54],[0,0,0,0,254,54,54,54],[0,0,248,24,248,24,24,24],[54,54,246,6,246,54,54,54],[54,54,54,54,54,54,54,54],[0,0,254,6,246,54,54,54],[54,54,246,6,254,0,0,0],[54,
54,54,54,254,0,0,0],[24,24,248,24,248,0,0,0],[0,0,0,0,248,24,24,24],[24,24,24,24,31,0,0,0],[24,24,24,24,255,0,0,0],[0,0,0,0,255,24,24,24],[24,24,24,24,31,24,24,24],[0,0,0,0,255,0,0,0],[24,24,24,24,255,24,24,24],[24,24,31,24,31,24,24,24],[54,54,54,54,55,54,54,54],[54,54,55,48,63,0,0,0],[0,0,63,48,55,54,54,54],[54,54,247,0,255,0,0,0],[0,0,255,0,247,54,54,54],[54,54,55,48,55,54,54,54],[0,0,255,0,255,0,0,0],[54,54,247,0,247,54,54,54],[24,24,255,0,255,0,0,0],[54,54,54,54,255,0,0,0],[0,0,255,0,255,24,24,
24],[0,0,0,0,255,54,54,54],[54,54,54,54,63,0,0,0],[24,24,31,24,31,0,0,0],[0,0,31,24,31,24,24,24],[0,0,0,0,63,54,54,54],[54,54,54,54,255,54,54,54],[24,24,255,24,255,24,24,24],[24,24,24,24,248,0,0,0],[0,0,0,0,31,24,24,24],[255,255,255,255,255,255,255,255],[0,0,0,0,255,255,255,255],[240,240,240,240,240,240,240,240],[15,15,15,15,15,15,15,15],[255,255,255,255,0,0,0,0],[0,0,118,220,200,220,118,0],[120,204,204,216,204,198,204,0],[254,198,192,192,192,192,192,0],[0,0,254,108,108,108,108,0],[254,198,96,48,
96,198,254,0],[0,0,126,216,216,216,112,0],[0,0,102,102,102,102,124,192],[0,118,220,24,24,24,24,0],[126,24,60,102,102,60,24,126],[56,108,198,254,198,108,56,0],[56,108,198,198,108,108,238,0],[14,24,12,62,102,102,60,0],[0,0,126,219,219,126,0,0],[6,12,126,219,219,126,96,192],[30,48,96,126,96,48,30,0],[0,124,198,198,198,198,198,0],[0,254,0,254,0,254,0,0],[24,24,126,24,24,0,126,0],[48,24,12,24,48,0,126,0],[12,24,48,24,12,0,126,0],[14,27,27,24,24,24,24,24],[24,24,24,24,24,216,216,112],[0,24,0,126,0,24,0,
0],[0,118,220,0,118,220,0,0],[56,108,108,56,0,0,0,0],[0,0,0,24,24,0,0,0],[0,0,0,24,0,0,0,0],[15,12,12,12,236,108,60,28],[108,54,54,54,54,0,0,0],[120,12,24,48,124,0,0,0],[0,0,60,60,60,60,0,0],[0,0,0,0,0,0,0,0]];this.height=8;for(a in d)j.call(d,a)&&(c=d[a],this[a]=c)}l(b,this.ImageTextModeFont);return b}.call(this);this.ImageTextModeFontAmiga=function(){function b(d){var a,c;b.__super__.constructor.apply(this,arguments);this.chars=[[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,
0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,
0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[24,60,60,60,24,24,24,0,24,0,0],[102,102,102,102,0,0,0,0,0,0,0],[108,108,254,108,108,108,254,108,108,0,0],[24,62,96,96,60,6,6,124,24,0,0],[0,192,198,204,24,48,102,198,6,0,0],[56,108,108,104,118,220,204,204,118,0,0],[24,24,24,48,0,0,0,0,0,0,0],[12,24,48,48,48,48,48,24,12,0,0],[48,
24,12,12,12,12,12,24,48,0,0],[0,102,102,60,255,60,102,102,0,0,0],[0,24,24,24,126,24,24,24,0,0,0],[0,0,0,0,0,0,24,24,24,48,0],[0,0,0,0,126,0,0,0,0,0,0],[0,0,0,0,0,0,0,24,24,0,0],[0,3,6,4,12,24,48,32,96,192,0],[60,102,102,118,126,110,102,102,60,0,0],[24,56,56,24,24,24,24,24,126,0,0],[60,102,102,6,12,24,48,102,126,0,0],[60,102,6,6,28,6,6,102,60,0,0],[12,28,60,108,204,254,12,12,30,0,0],[126,96,96,124,6,6,6,102,60,0,0],[28,48,96,96,124,102,102,102,60,0,0],[126,102,6,6,12,24,24,24,24,0,0],[60,102,102,102,
60,102,102,102,60,0,0],[60,102,102,102,62,6,6,12,56,0,0],[0,0,24,24,0,0,0,24,24,0,0],[0,0,24,24,0,0,24,24,24,48,0],[0,12,24,48,96,48,24,12,0,0,0],[0,0,0,126,0,0,126,0,0,0,0],[0,48,24,12,6,12,24,48,0,0,0],[60,102,6,6,12,24,0,24,24,0,0],[124,198,198,222,222,222,192,192,120,0,0],[24,60,60,102,102,126,195,195,195,0,0],[252,102,102,102,124,102,102,102,252,0,0],[60,102,192,192,192,192,192,102,60,0,0],[248,108,102,102,102,102,102,108,248,0,0],[254,102,96,96,120,96,96,102,254,0,0],[254,102,96,96,120,96,96,
96,240,0,0],[60,102,192,192,206,198,198,102,62,0,0],[102,102,102,102,126,102,102,102,102,0,0],[126,24,24,24,24,24,24,24,126,0,0],[14,6,6,6,6,102,102,102,60,0,0],[230,102,102,108,120,108,102,102,230,0,0],[240,96,96,96,96,96,98,102,254,0,0],[130,130,198,198,238,254,214,214,198,0,0],[134,198,230,246,254,222,206,198,194,0,0],[56,108,198,198,198,198,198,108,56,0,0],[252,102,102,102,124,96,96,96,240,0,0],[56,108,198,198,198,198,198,108,60,6,3],[252,102,102,102,124,120,108,102,243,0,0],[60,102,102,48,24,
12,6,102,60,0,0],[126,90,24,24,24,24,24,24,60,0,0],[102,102,102,102,102,102,102,102,62,0,0],[195,195,195,102,102,60,60,24,24,0,0],[198,198,214,214,254,238,238,198,198,0,0],[195,195,102,60,24,60,102,195,195,0,0],[195,195,195,102,60,24,24,24,60,0,0],[254,198,134,12,24,48,98,198,254,0,0],[60,48,48,48,48,48,48,48,60,0,0],[0,192,96,32,48,24,12,4,6,3,0],[60,12,12,12,12,12,12,12,60,0,0],[16,56,108,198,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,254],[24,24,24,12,0,0,0,0,0,0,0],[0,0,0,60,6,30,102,102,59,0,0],[224,
96,96,108,118,102,102,102,124,0,0],[0,0,0,60,102,96,96,102,60,0,0],[14,6,6,54,110,102,102,102,59,0,0],[0,0,0,60,102,102,126,96,60,0,0],[28,54,48,48,120,48,48,48,120,0,0],[0,0,0,59,102,102,102,60,198,198,124],[224,96,96,108,118,102,102,102,230,0,0],[24,24,0,56,24,24,24,24,60,0,0],[6,6,0,6,6,6,6,6,6,102,60],[224,96,102,102,108,120,108,102,230,0,0],[56,24,24,24,24,24,24,24,60,0,0],[0,0,0,204,238,254,214,214,198,0,0],[0,0,0,124,102,102,102,102,102,0,0],[0,0,0,60,102,102,102,102,60,0,0],[0,0,0,220,102,
102,102,124,96,96,240],[0,0,0,61,102,102,102,62,6,6,7],[0,0,0,236,118,102,96,96,240,0,0],[0,0,0,62,112,56,28,14,124,0,0],[8,24,24,62,24,24,24,26,12,0,0],[0,0,0,102,102,102,102,102,59,0,0],[0,0,0,102,102,102,60,60,24,0,0],[0,0,0,198,214,214,214,108,108,0,0],[0,0,0,198,108,56,56,108,198,0,0],[0,0,0,102,102,102,102,60,24,48,224],[0,0,0,126,76,24,48,98,126,0,0],[14,24,24,24,112,24,24,24,14,0,0],[24,24,24,24,24,24,24,24,24,24,0],[112,24,24,24,14,24,24,24,112,0,0],[98,186,140,0,0,0,0,0,0,0,0],[204,51,204,
51,204,51,204,51,204,51,204],[126,102,102,102,102,102,126,0,0,0,0],[126,102,102,102,102,102,126,0,0,0,0],[126,102,102,102,102,102,126,0,0,0,0],[126,102,102,102,102,102,126,0,0,0,0],[126,102,102,102,102,102,126,0,0,0,0],[0,126,102,102,102,102,102,126,0,0,0],[126,102,102,102,102,102,126,0,0,0,0],[126,102,102,102,102,102,126,0,0,0,0],[126,102,102,102,102,102,126,0,0,0,0],[126,102,102,102,102,102,126,0,0,0,0],[126,102,102,102,102,102,126,0,0,0,0],[126,102,102,102,102,102,126,0,0,0,0],[126,102,102,102,
102,102,126,0,0,0,0],[126,102,102,102,102,102,126,0,0,0,0],[126,102,102,102,102,102,126,0,0,0,0],[126,102,102,102,102,102,126,0,0,0,0],[126,102,102,102,102,102,126,0,0,0,0],[126,102,102,102,102,102,126,0,0,0,0],[126,102,102,102,102,102,126,0,0,0,0],[126,102,102,102,102,102,126,0,0,0,0],[126,102,102,102,102,102,126,0,0,0,0],[126,102,102,102,102,102,126,0,0,0,0],[126,102,102,102,102,102,126,0,0,0,0],[126,102,102,102,102,102,126,0,0,0,0],[126,102,102,102,102,102,126,0,0,0,0],[126,102,102,102,102,102,
126,0,0,0,0],[126,102,102,102,102,102,126,0,0,0,0],[126,102,102,102,102,102,126,0,0,0,0],[126,102,102,102,102,102,126,0,0,0,0],[126,102,102,102,102,102,126,0,0,0,0],[126,102,102,102,102,102,126,0,0,0,0],[126,102,102,102,102,102,126,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[24,0,24,24,24,60,60,60,24,0,0],[12,12,62,108,108,108,62,12,12,0,0],[28,54,48,48,120,48,48,48,126,0,0],[102,102,60,102,102,102,60,102,102,0,0],[102,102,102,60,24,126,24,24,60,0,0],[24,24,24,24,0,24,24,24,24,0,0],[60,96,96,60,102,102,102,
60,6,6,60],[102,102,0,0,0,0,0,0,0,0,0],[126,129,129,157,177,177,177,157,129,126,0],[60,204,204,118,0,254,0,0,0,0,0],[0,0,51,102,204,102,51,0,0,0,0],[126,6,6,6,0,0,0,0,0,0,0],[0,0,0,0,126,0,0,0,0,0,0],[126,129,177,185,185,177,169,165,129,126,0],[126,0,0,0,0,0,0,0,0,0,0],[60,102,102,60,0,0,0,0,0,0,0],[24,24,24,126,24,24,24,0,126,0,0],[120,12,12,24,48,96,124,0,0,0,0],[120,12,12,56,12,12,120,0,0,0,0],[12,24,48,96,0,0,0,0,0,0,0],[0,0,102,102,102,102,110,122,96,96,0],[126,244,244,244,116,20,20,20,20,20,
0],[0,0,24,24,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,12,24],[24,56,56,24,24,24,24,0,0,0,0],[60,102,102,102,60,0,126,0,0,0,0],[0,0,204,102,51,102,204,0,0,0,0],[64,198,76,88,114,102,206,2,2,0,0],[32,99,38,44,59,49,98,196,15,0,0],[192,99,198,108,217,51,103,193,1,0,0],[24,24,0,24,48,96,96,102,60,0,0],[96,48,8,56,108,198,254,198,198,0,0],[12,24,32,56,108,198,254,198,198,0,0],[48,72,132,56,108,198,254,198,198,0,0],[114,156,0,56,108,198,254,198,198,0,0],[198,198,16,56,108,198,254,198,198,0,0],[56,108,56,108,
108,254,198,198,198,0,0],[31,60,60,108,111,252,204,204,207,0,0],[60,102,192,192,192,192,192,102,60,24,48],[96,24,254,96,96,124,96,96,254,0,0],[24,96,254,96,96,124,96,96,254,0,0],[24,36,254,96,96,124,96,96,254,0,0],[102,0,254,96,96,124,96,96,254,0,0],[48,12,126,24,24,24,24,24,126,0,0],[12,48,126,24,24,24,24,24,126,0,0],[24,36,126,24,24,24,24,24,126,0,0],[102,0,126,24,24,24,24,24,126,0,0],[248,108,102,102,246,102,102,108,248,0,0],[113,142,198,230,246,222,206,198,194,0,0],[48,12,60,102,195,195,195,102,
60,0,0],[12,48,60,102,195,195,195,102,60,0,0],[24,36,60,102,195,195,195,102,60,0,0],[113,142,60,102,195,195,195,102,60,0,0],[102,0,60,102,195,195,195,102,60,0,0],[0,0,99,54,28,28,54,99,0,0,0],[60,102,199,207,219,243,227,102,60,0,0],[96,48,8,102,102,102,102,102,62,0,0],[6,12,16,102,102,102,102,102,62,0,0],[24,36,0,102,102,102,102,102,62,0,0],[102,102,0,102,102,102,102,102,62,0,0],[6,24,195,102,60,24,24,24,60,0,0],[240,96,126,99,99,99,126,96,96,96,240],[124,102,102,102,108,102,102,102,108,96,96],[96,
48,8,60,6,30,102,102,59,0,0],[6,12,16,60,6,30,102,102,59,0,0],[24,36,66,60,6,30,102,102,59,0,0],[113,142,0,60,6,30,102,102,59,0,0],[102,102,0,60,6,30,102,102,59,0,0],[60,102,102,60,6,30,102,102,59,0,0],[0,0,0,126,27,127,216,216,119,0,0],[0,0,0,60,102,96,96,102,60,8,48],[96,48,8,60,102,102,126,96,60,0,0],[6,12,16,60,102,102,126,96,60,0,0],[24,36,66,60,102,102,126,96,60,0,0],[102,102,0,60,102,102,126,96,60,0,0],[96,48,8,56,24,24,24,24,60,0,0],[12,24,32,112,48,48,48,48,120,0,0],[24,36,66,28,12,12,12,
12,30,0,0],[102,102,0,56,24,24,24,24,60,0,0],[108,48,216,12,126,198,198,198,124,0,0],[113,142,0,124,102,102,102,102,102,0,0],[96,48,8,60,102,102,102,102,60,0,0],[6,12,16,60,102,102,102,102,60,0,0],[24,36,66,60,102,102,102,102,60,0,0],[113,142,0,60,102,102,102,102,60,0,0],[102,102,0,60,102,102,102,102,60,0,0],[0,24,24,0,126,0,24,24,0,0,0],[0,0,0,124,206,222,246,230,124,0,0],[96,48,8,204,204,204,204,204,118,0,0],[12,24,32,204,204,204,204,204,118,0,0],[48,72,0,204,204,204,204,204,118,0,0],[204,204,0,
204,204,204,204,204,118,0,0],[6,12,16,102,102,102,102,60,24,24,112],[240,96,96,124,102,102,102,124,96,96,240],[102,102,0,102,102,102,102,60,24,24,112]];this.height=11;for(a in d)j.call(d,a)&&(c=d[a],this[a]=c)}l(b,this.ImageTextModeFont);return b}.call(this);this.ImageTextMode=function(){function b(d){var a,c;this.screen=[];this.palette=new ImageTextModePaletteVGA;this.font=new ImageTextModeFont8x16;for(a in d)j.call(d,a)&&(c=d[a],this[a]=c)}b.VERSION="0.01";b.prototype.parseUrl=function(d){var a;
a=new XMLHttpRequest;a.open("GET",d,!1);a.overrideMimeType("text/plain; charset=x-user-defined");a.send(null);return this.parse(a.status===200||a.status===0?a.responseText:"")};b.prototype.unpackShort=function(d){d=(this.getByteAt(d,1)<<8)+this.getByteAt(d,0);d<0&&(d+=65536);return d};b.prototype.getByteAt=function(d,a){return d.charCodeAt(a)&255};b.prototype.getWidth=function(){var d,a,c;a=d=0;for(c=this.screen.length-1;0<=c?a<=c:a>=c;0<=c?a+=1:a-=1)if(this.screen[a]!=null&&this.screen[a].length>
d)d=this.screen[a].length;return d};b.prototype.getHeight=function(){return this.screen.length};b.prototype.renderCanvas=function(d){var a,c,k,b,e,f,h,i,j,l,q,r,m,n,o,p;r=this.getWidth()*this.font.width;h=this.getHeight()*this.font.height;c=document.createElement("canvas");c.setAttribute("width",r);c.setAttribute("height",h);k=c.getContext("2d");e=0;for(m=this.screen.length-1;0<=m?e<=m:e>=m;0<=m?e+=1:e-=1)if(this.screen[e]!=null){b=0;for(n=this.screen[e].length-1;0<=n?b<=n:b>=n;0<=n?b+=1:b-=1)if(i=
this.screen[e][b],i!=null){f=i.attr&15;a=(i.attr&240)>>4;l=b*8;q=e*16;k.fillStyle=this.palette.toRgbaString(this.palette.colors[a]);k.fillRect(l,q,8,16);k.fillStyle=this.palette.toRgbaString(this.palette.colors[f]);a=this.font.chars[i.ch.charCodeAt(0)&255];f=0;for(o=this.font.height-1;0<=o?f<=o:f>=o;0<=o?f+=1:f-=1){j=a[f];i=0;for(p=this.font.width-1;0<=p?i<=p:i>=p;0<=p?i+=1:i-=1)j&1<<this.font.width-1-i&&k.fillRect(l+i,q+f,1,1)}}}d.setAttribute("width",r);d.setAttribute("height",h);k=d.getContext("2d");
return k.drawImage(c,0,0)};return b}();this.ImageTextModeXBin=function(){function b(d){var a,c;b.__super__.constructor.apply(this,arguments);this.header={width:0,height:0,fontisze:0,flags:0};for(a in d)j.call(d,a)&&(c=d[a],this[a]=c)}l(b,this.ImageTextMode);b.prototype.parse=function(d){var a,c;this.screen=[];a=d.substr(0,11);if(a.length===!1||!a.match("^XBIN\u001a"))throw Error("File is not an XBin");this.header.width=this.unpackShort(a.substr(5,2));this.header.height=this.unpackShort(a.substr(7,
2));this.header.fontsize=this.getByteAt(a.substr(9,1));this.header.flags=this.getByteAt(a.substr(10,1));c=11;this.header.flags&1&&(this._parse_palette(d.substr(c,48)),c+=48);if(this.header.flags&2)a=this.header.fontsize,a*=this.header.flags&16?512:256,this._parse_font(d.substr(c,a)),c+=a;return this.header.flags&4?this._parse_compressed(d.substr(c)):this._parse_uncompressed(d.substr(c))};b.prototype._parse_palette=function(d){var a,c,k,b,e;c=[];for(b=0;b<=45;b+=3)e=this.getByteAt(d,b),e=e<<2|e>>4,
k=this.getByteAt(d,b+1),k=k<<2|k>>4,a=this.getByteAt(d,b+2),a=a<<2|a>>4,c[b/3]=[e,k,a];return this.palette=new ImageTextModePalette({colors:c})};b.prototype._parse_font=function(d){var a,c,b,g,e,f,h;b=this.header.fontsize;a=[];g=0;for(f=d.length/b-1;0<=f?g<=f:g>=f;0<=f?g+=1:g-=1){c=[];e=0;for(h=b-1;0<=h?e<=h:e>=h;0<=h?e+=1:e-=1)c.push(this.getByteAt(d,g*b+e));a.push(c)}return this.font=new ImageTextModeFont({chars:a,height:b})};b.prototype._parse_compressed=function(d){var a,c,b,g,e,f,h,i;h=f=0;this.screen[h]=
[];d=d.split("");for(i=[];g=d.shift();){g=this.getByteAt(g,0);if(g===26)break;e=g&192;b=(g&63)+1;a=c=null;i.push(function(){for(;b-- >0;){switch(e){case 0:c=d.shift();a=d.shift();break;case 64:c==null&&(c=d.shift());a=d.shift();break;case 128:a==null&&(a=d.shift());c=d.shift();break;default:c==null&&(c=d.shift()),a==null&&(a=d.shift())}this.screen[h][f]={ch:c,attr:this.getByteAt(a,0)};f++;if(f===this.header.width){f=0;h++;if(h===this.header.height)break;this.screen[h]==null&&(this.screen[h]=[])}}return[]}.call(this))}return i};
b.prototype._parse_uncompressed=function(d){var a,c,b,g,e,f;e=g=0;this.screen[e]=[];b=0;for(f=d.length-3;0<=f?b<=f:b>=f;b+=2){c=d.substr(b,1);if(c==="\u001a")break;a=this.getByteAt(d,b+1);this.screen[e][g]={ch:c,attr:a};g++;if(g===this.header.width){g=0;e++;if(e===this.header.height)break;this.screen[e]==null&&(this.screen[e]=[])}}return[]};b.prototype.getWidth=function(){return this.header.width};b.prototype.getHeight=function(){return this.header.height};return b}.call(this);this.ImageTextModeANSI=
function(){function b(d){var a,c;b.__super__.constructor.apply(this,arguments);this.palette=new ImageTextModePaletteANSI;this.tabstop=8;this.linewrap=80;for(a in d)j.call(d,a)&&(c=d[a],this[a]=c)}l(b,this.ImageTextMode);b.prototype.parse=function(d){var a,c,b,g,e;this.screen=[];this.save_y=this.save_x=this.y=this.x=this.state=0;this.attr=7;this.argbuf="";for(d=d.split("");a=d.shift();)if(this.state===0)switch(a){case "\u001a":this.state=3;break;case "\u001b":this.state=1;break;case "\n":this.x=0;
this.y++;break;case "\r":break;case "\t":for(b=(this.x+1)%this.tabstop;b-- >0;)this.putpixel(" ");break;default:this.putpixel(a)}else if(this.state===1)a!=="["?(this.putpixel("\u001b"),this.putpixel("["),this.state=0):this.state=2;else if(this.state===2)if(a.match("[A-Za-z]")){c=function(){var a,c,d,e;d=this.argbuf.split(";");e=[];a=0;for(c=d.length;a<c;a++)b=d[a],e.push(parseInt(b));return e}.call(this);switch(a){case "m":g=0;for(e=c.length;g<e;g++)a=c[g],a===0?this.attr=7:a===1?this.attr|=8:a===
5?this.attr|=128:30<=a&&a<=37?(this.attr&=248,this.attr|=a-30):40<=a&&a<=47&&(this.attr&=143,this.attr|=a-40<<4);break;case "H":case "f":this.y=(c[0]||1)-1;this.x=(c[1]||1)-1;if(this.y<0)this.y=0;if(this.x<0)this.x=0;break;case "A":this.y-=c[0]||1;if(this.y<0)this.y=0;break;case "B":this.y+=c[0]||1;break;case "C":this.x+=c[0]||1;break;case "D":this.x-=c[0]||1;if(this.x<0)this.x=0;break;case "E":this.y+=c[0]||1;this.x=0;break;case "F":this.y-=c[0]||1;if(this.y>0)this.y=0;this.x=0;break;case "G":this.x=
(c[0]||1)-1;break;case "s":this.save_x=this.x;this.save_y=this.y;break;case "u":this.x=this.save_x;this.y=this.save_y;break;case "J":if(c.length===0||c[0]===0){b=c=this.y+1;for(a=screen.length-1;c<=a?b<=a:b>=a;c<=a?b+=1:b-=1)this.screen[b]=null;b=c=this.x;for(a=screen[this.y].length-1;c<=a?b<=a:b>=a;c<=a?b+=1:b-=1)this.screen[this.y][b]=null}else if(c[0]===1){b=0;for(c=this.y-1;0<=c?b<=c:b>=c;0<=c?b+=1:b-=1)this.screen[b]=null;b=0;for(c=this.x;0<=c?b<=c:b>=c;0<=c?b+=1:b-=1)this.screen[this.y][b]=
null}else if(c[0]===2)this.y=this.x=0,this.screen=[];break;case "K":if(c.length===0||c[0]===0){b=c=this.x;for(a=this.screen[this.y].length-1;c<=a?b<=a:b>=a;c<=a?b+=1:b-=1)this.screen[this.y][b]=null}else if(c[0]===1){b=0;for(c=this.x;0<=c?b<=c:b>=c;0<=c?b+=1:b-=1)this.screen[this.y][b]=null}else c[0]===2&&(this.screen[this.y]=null)}this.argbuf="";this.state=0}else this.argbuf+=a;else if(this.state===3)break;else this.state=0;return[]};b.prototype.putpixel=function(b){this.screen[this.y]==null&&(this.screen[this.y]=
[]);this.screen[this.y][this.x]={ch:b,attr:this.attr};if(++this.x>=this.linewrap)return this.x=0,this.y++};return b}.call(this)}).call(this);